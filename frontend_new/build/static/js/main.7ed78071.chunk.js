(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{270:function(e,t,a){},271:function(e,t,a){},286:function(e,t,a){},292:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(26),i=a.n(r),s=(a(270),a(271),a(48)),o=a.n(s),l=a(76),j=a(16),d=a(4),b=a(6),h=a(18),O=a(403),x=a(160),p=a(39),u=a(175),m=a(231),g=a(409),f=a(410),v=a(412),y=a(414),_=a(415),S=a(416),w=a(153),C=a(469),k=a(445),L=a(402),T=a(408),W=a(301),A=a(422),N=a(423),E=a(424),D=a(425),I=a(307),R=a(444),P=a(411),B=a(413),M=a(417),F=a(418),U=a(419),J=a(420),G=a(421),z=a(117),H=a.n(z),q=a(3),V=a(121),X=a(379),Q=a(384),K=a(154),Y=a(452),Z=a(453),$=a(454),ee=a(434),te=a(455),ae=a(456),ne=a(239),ce=a(457),re=a(458),ie=a(459),se=a(460),oe=a(461),le=a(462),je=a(463),de=a(440),be=a(385),he=a(386),Oe=a(387),xe=a(388),pe=a(389),ue=a(390),me=a(0);function ge(e){var t=e.open,a=e.onClose,n=e.role,c=e.id,r=e.webSocket,i=e.fetchLeaves,s=function(){a()};return Object(me.jsxs)(X.a,{onClose:s,open:t,children:[Object(me.jsx)(Q.a,{children:"manager"===n?Object(me.jsx)(K.a,{children:"Do you want to approve the Leave Application?"}):Object(me.jsx)(K.a,{children:"Do you want to forward the Leave Application to Manager?"})}),Object(me.jsxs)(Y.a,{children:[Object(me.jsx)(Z.a,{color:"success",onClick:function(){console.log("Approving leave with ID "+c);var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leave_id:c})};fetch("http://127.0.0.1:8000/leaves/leave-".concat(n,"-approve/"),e).then((function(e){return e.json()})).then((function(e){console.log("sending request from admin",{admin:"admin"!==n,employee:!0,manager:"manager"!==n}),i(),a(),r.send(JSON.stringify({action:"UPDATE",admin:"admin"!==n,employee:!0,manager:"manager"!==n}))}))},children:"manager"===n?"Approve":"Forward"}),Object(me.jsx)(Z.a,{color:"warning",onClick:s,children:"Cancel"})]})]})}function fe(e){var t=e.open,a=e.onClose,n=e.role,c=e.id,r=e.webSocket,i=e.fetchLeaves,s=function(){a()};return Object(me.jsxs)(X.a,{onClose:s,open:t,children:[Object(me.jsx)(Q.a,{children:Object(me.jsx)(K.a,{children:"Do you want to reject the Leave Application?"})}),Object(me.jsxs)(Y.a,{children:[Object(me.jsx)(Z.a,{color:"error",onClick:function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leave_id:c})};fetch("http://127.0.0.1:8000/leaves/leave-".concat(n,"-reject/"),e).then((function(e){return e.json()})).then((function(e){r.send(JSON.stringify({action:"UPDATE",employee:!0,admin:"admin"!==n,manager:"manager"!==n})),i(),a()}))},children:"Reject"}),Object(me.jsx)(Z.a,{color:"warning",onClick:s,children:"Cancel"})]})]})}function ve(e){var t=e.children,a=e.value,n=e.index,c=Object(V.a)(e,["children","value","index"]);return Object(me.jsx)("div",Object(h.a)(Object(h.a)({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},c),{},{children:a===n&&Object(me.jsx)($.a,{sx:{p:3},children:Object(me.jsx)(K.a,{children:t})})}))}function ye(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var _e=function(e){var t,a=c.a.useState(0),r=Object(d.a)(a,2),i=r[0],s=r[1],o=c.a.useState(5),l=Object(d.a)(o,2),j=l[0],b=l[1],O=c.a.useState(0),x=Object(d.a)(O,2),p=x[0],u=x[1],m=c.a.useState(5),g=Object(d.a)(m,2),f=g[0],v=g[1],y=c.a.useState(0),_=Object(d.a)(y,2),S=_[0],w=_[1],C=c.a.useState(5),k=Object(d.a)(C,2),L=k[0],T=k[1],W=c.a.useState(0),A=Object(d.a)(W,2),N=A[0],E=A[1],D=c.a.useState(5),R=Object(d.a)(D,2),P=R[0],B=R[1],M=c.a.useState(!1),F=Object(d.a)(M,2),U=F[0],J=F[1],G=c.a.useState(!1),z=Object(d.a)(G,2),H=z[0],q=z[1],V=Object(n.useState)(null),X=Object(d.a)(V,2),Q=X[0],Y=X[1],Z=c.a.useState(0),_e=Object(d.a)(Z,2),Se=_e[0],we=_e[1];Object(n.useEffect)((function(){e.leaves.filter((function(e){return e.waiting_approval})),t=e.leaves.filter((function(e){return e.manager_approved})),console.log(t)}),[e.leaves]);var Ce=function(e){J(!0)},ke=function(e){q(!0)},Le=function(){U&&J(!1),H&&q(!1)};return Object(me.jsxs)($.a,{sx:{width:"100%",marginTop:10},children:[Object(me.jsx)($.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(me.jsxs)(ee.a,{value:Se,onChange:function(e,t){we(t)},"aria-label":"basic tabs example",children:[Object(me.jsx)(te.a,Object(h.a)({label:"Waiting Applications"},ye(0))),Object(me.jsx)(te.a,Object(h.a)({label:"Accepted Applications"},ye(1))),Object(me.jsx)(te.a,Object(h.a)({label:"Rejected Applications"},ye(2))),Object(me.jsx)(te.a,Object(h.a)({label:"All Applications"},ye(2)))]})}),Object(me.jsx)(ve,{value:Se,index:0,children:Object(me.jsx)(ae.a,{component:ne.a,children:Object(me.jsxs)(ce.a,{style:{minWidth:"500px"},children:[Object(me.jsx)(re.a,{children:Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"S. No."}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},align:"left",children:"Employee Name"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Leave Type"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Applied On"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"From"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"To"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Admin"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Manager"}),"manager"===e.role?Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Approve/Reject"}):Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Forward/Reject"})]})}),Object(me.jsx)(oe.a,{children:(f>0?e.leaves.slice(p*f,p*f+f):e.leaves).map((function(t,a){return"admin"===e.role&&t.waiting_approval?Object(me.jsx)(me.Fragment,{children:Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{children:t.id}),Object(me.jsxs)(se.a,{align:"left",children:[t.is_online?Object(me.jsx)(be.a,{color:"success",sx:{}}):Object(me.jsx)(be.a,{color:"disabled",sx:{}}),t.name]}),Object(me.jsx)(se.a,{children:t.leave_type}),Object(me.jsx)(se.a,{children:t.applied_on.substr(0,10)}),Object(me.jsx)(se.a,{children:t.from_date}),Object(me.jsx)(se.a,{children:t.to_date}),Object(me.jsx)(se.a,{style:{paddingLeft:"25px"},children:t.waiting_approval?Object(me.jsx)(he.a,{color:"warning"}):t.admin_approved?Object(me.jsx)(Oe.a,{color:"success"}):Object(me.jsx)(xe.a,{color:"error"})}),Object(me.jsx)(se.a,{style:{paddingLeft:"32px"},children:t.waiting_approval?Object(me.jsx)(he.a,{color:"warning"}):t.admin_approved?t.manager_rejected?Object(me.jsx)(xe.a,{color:"error"}):t.manager_approved?Object(me.jsx)(Oe.a,{color:"success"}):Object(me.jsx)(he.a,{color:"warning"}):Object(me.jsx)(xe.a,{color:"error"})}),"manager"===e.role?Object(me.jsx)(se.a,{align:"center",children:t.manager_rejected||t.manager_approved?t.manager_approved?Object(me.jsx)(K.a,{color:"green",children:"Approved"}):Object(me.jsx)(K.a,{color:"red",children:"Rejected"}):Object(me.jsxs)(le.a,{variant:"contained",children:[Object(me.jsx)(I.a,{color:"success",onClick:function(){Y(t.id),Ce()},children:Object(me.jsx)(pe.a,{})}),Object(me.jsx)(ge,{open:U,onClose:Le,role:"manager",id:Q,webSocket:e.webSocket,fetchLeaves:e.fetchLeaves}),Object(me.jsx)(I.a,{color:"error",onClick:function(){Y(t.id),ke()},children:Object(me.jsx)(ue.a,{})}),Object(me.jsx)(fe,{open:H,onClose:Le,id:Q,role:"manager",webSocket:e.webSocket,fetchLeaves:e.fetchLeaves})]})}):Object(me.jsx)(se.a,{align:"center",children:t.waiting_approval?Object(me.jsxs)(le.a,{variant:"contained",children:[Object(me.jsx)(I.a,{color:"success",onClick:function(){Y(t.id),Ce()},children:Object(me.jsx)(pe.a,{})}),Object(me.jsx)(ge,{open:U,onClose:Le,role:"admin",id:Q,webSocket:e.webSocket,fetchLeaves:e.fetchLeaves}),Object(me.jsx)(I.a,{color:"error",onClick:function(){Y(t.id),ke()},children:Object(me.jsx)(ue.a,{})}),Object(me.jsx)(fe,{open:H,onClose:Le,id:Q,role:"admin",webSocket:e.webSocket,fetchLeaves:e.fetchLeaves})]}):t.manager_approved?Object(me.jsx)(K.a,{color:"green",children:"Accepted"}):t.manager_rejected?Object(me.jsx)(K.a,{color:"red",children:"Rejected"}):t.admin_approved?Object(me.jsx)(K.a,{color:"green",children:"Forwarded"}):Object(me.jsx)(K.a,{color:"red",children:"Rejected"})})]})}):"manager"===e.role&&!t.manager_approved&&!t.manager_rejected&&Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{children:t.id}),Object(me.jsxs)(se.a,{align:"left",children:[t.is_online?Object(me.jsx)(be.a,{color:"success",sx:{}}):Object(me.jsx)(be.a,{color:"disabled",sx:{}}),t.name]}),Object(me.jsx)(se.a,{children:t.leave_type}),Object(me.jsx)(se.a,{children:t.applied_on.substr(0,10)}),Object(me.jsx)(se.a,{children:t.from_date}),Object(me.jsx)(se.a,{children:t.to_date}),Object(me.jsx)(se.a,{style:{paddingLeft:"25px"},children:t.waiting_approval?Object(me.jsx)(he.a,{color:"warning"}):t.admin_approved?Object(me.jsx)(Oe.a,{color:"success"}):Object(me.jsx)(xe.a,{color:"error"})}),Object(me.jsx)(se.a,{style:{paddingLeft:"32px"},children:t.waiting_approval?Object(me.jsx)(he.a,{color:"warning"}):t.admin_approved?t.manager_rejected?Object(me.jsx)(xe.a,{color:"error"}):t.manager_approved?Object(me.jsx)(Oe.a,{color:"success"}):Object(me.jsx)(he.a,{color:"warning"}):Object(me.jsx)(xe.a,{color:"error"})}),"manager"===e.role?Object(me.jsx)(se.a,{align:"center",children:t.manager_rejected||t.manager_approved?t.manager_approved?Object(me.jsx)(K.a,{color:"green",children:"Approved"}):Object(me.jsx)(K.a,{color:"red",children:"Rejected"}):Object(me.jsxs)(le.a,{variant:"contained",children:[Object(me.jsx)(I.a,{color:"success",onClick:function(){Y(t.id),Ce()},children:Object(me.jsx)(pe.a,{})}),Object(me.jsx)(ge,{open:U,onClose:Le,role:"manager",id:Q,webSocket:e.webSocket,fetchLeaves:e.fetchLeaves}),Object(me.jsx)(I.a,{color:"error",onClick:function(){Y(t.id),ke()},children:Object(me.jsx)(ue.a,{})}),Object(me.jsx)(fe,{open:H,onClose:Le,id:Q,role:"manager",webSocket:e.webSocket,fetchLeaves:e.fetchLeaves})]})}):Object(me.jsx)(se.a,{align:"center",children:t.waiting_approval?Object(me.jsxs)(le.a,{variant:"contained",children:[Object(me.jsx)(I.a,{color:"success",onClick:function(){Y(t.id),Ce()},children:Object(me.jsx)(pe.a,{})}),Object(me.jsx)(ge,{open:U,onClose:Le,role:"admin",id:Q,webSocket:e.webSocket,fetchLeaves:e.fetchLeaves}),Object(me.jsx)(I.a,{color:"error",onClick:function(){Y(t.id),ke()},children:Object(me.jsx)(ue.a,{})}),Object(me.jsx)(fe,{open:H,onClose:Le,id:Q,role:"admin",webSocket:e.webSocket,fetchLeaves:e.fetchLeaves})]}):t.manager_approved?Object(me.jsx)(K.a,{color:"green",children:"Accepted"}):t.manager_rejected?Object(me.jsx)(K.a,{color:"red",children:"Rejected"}):t.admin_approved?Object(me.jsx)(K.a,{color:"green",children:"Forwarded"}):Object(me.jsx)(K.a,{color:"red",children:"Rejected"})})]})}))}),Object(me.jsx)(je.a,{children:Object(me.jsx)(ie.a,{children:Object(me.jsx)(de.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],count:e.leaves.length,rowsPerPage:f,page:p,onRowsPerPageChange:function(e){v(parseInt(e.target.value,10)),u(0)},onPageChange:function(e,t){u(t)}})})})]})})}),Object(me.jsx)(ve,{value:Se,index:1,children:Object(me.jsx)(ae.a,{component:ne.a,children:Object(me.jsxs)(ce.a,{style:{minWidth:"500px"},children:[Object(me.jsx)(re.a,{children:Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"S. No."}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},align:"left",children:"Employee Name"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Leave Type"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Applied On"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"From"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"To"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Admin"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Manager"}),"manager"===e.role?Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Approve/Reject"}):Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Forward/Reject"})]})}),Object(me.jsx)(oe.a,{children:(L>0?e.leaves.slice(S*L,S*L+L):e.leaves).map((function(t,a){return"admin"===e.role&&t.manager_approved?Object(me.jsx)(me.Fragment,{children:Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{children:t.id}),Object(me.jsxs)(se.a,{align:"left",children:[t.is_online?Object(me.jsx)(be.a,{color:"success",sx:{}}):Object(me.jsx)(be.a,{color:"disabled",sx:{}}),t.name]}),Object(me.jsx)(se.a,{children:t.leave_type}),Object(me.jsx)(se.a,{children:t.applied_on.substr(0,10)}),Object(me.jsx)(se.a,{children:t.from_date}),Object(me.jsx)(se.a,{children:t.to_date}),Object(me.jsx)(se.a,{style:{paddingLeft:"25px"},children:t.waiting_approval?Object(me.jsx)(he.a,{color:"warning"}):t.admin_approved?Object(me.jsx)(Oe.a,{color:"success"}):Object(me.jsx)(xe.a,{color:"error"})}),Object(me.jsx)(se.a,{style:{paddingLeft:"32px"},children:t.waiting_approval?Object(me.jsx)(he.a,{color:"warning"}):t.admin_approved?t.manager_rejected?Object(me.jsx)(xe.a,{color:"error"}):t.manager_approved?Object(me.jsx)(Oe.a,{color:"success"}):Object(me.jsx)(he.a,{color:"warning"}):Object(me.jsx)(xe.a,{color:"error"})}),"manager"===e.role?Object(me.jsx)(se.a,{align:"center",children:t.manager_rejected||t.manager_approved?t.manager_approved?Object(me.jsx)(K.a,{color:"green",children:"Approved"}):Object(me.jsx)(K.a,{color:"red",children:"Rejected"}):Object(me.jsxs)(le.a,{variant:"contained",children:[Object(me.jsx)(I.a,{color:"success",onClick:function(){Y(t.id),Ce()},children:Object(me.jsx)(pe.a,{})}),Object(me.jsx)(ge,{open:U,onClose:Le,role:"manager",id:Q,webSocket:e.webSocket,fetchLeaves:e.fetchLeaves}),Object(me.jsx)(I.a,{color:"error",onClick:function(){Y(t.id),ke()},children:Object(me.jsx)(ue.a,{})}),Object(me.jsx)(fe,{open:H,onClose:Le,id:Q,role:"manager",webSocket:e.webSocket,fetchLeaves:e.fetchLeaves})]})}):Object(me.jsx)(se.a,{align:"center",children:t.waiting_approval?Object(me.jsxs)(le.a,{variant:"contained",children:[Object(me.jsx)(I.a,{color:"success",onClick:function(){Y(t.id),Ce()},children:Object(me.jsx)(pe.a,{})}),Object(me.jsx)(ge,{open:U,onClose:Le,role:"admin",id:Q,webSocket:e.webSocket,fetchLeaves:e.fetchLeaves}),Object(me.jsx)(I.a,{color:"error",onClick:function(){Y(t.id),ke()},children:Object(me.jsx)(ue.a,{})}),Object(me.jsx)(fe,{open:H,onClose:Le,id:Q,role:"admin",webSocket:e.webSocket,fetchLeaves:e.fetchLeaves})]}):t.manager_approved?Object(me.jsx)(K.a,{color:"green",children:"Accepted"}):t.manager_rejected?Object(me.jsx)(K.a,{color:"red",children:"Rejected"}):t.admin_approved?Object(me.jsx)(K.a,{color:"green",children:"Forwarded"}):Object(me.jsx)(K.a,{color:"red",children:"Rejected"})})]})}):"manager"===e.role&&t.manager_approved&&Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{children:t.id}),Object(me.jsxs)(se.a,{align:"left",children:[t.is_online?Object(me.jsx)(be.a,{color:"success",sx:{}}):Object(me.jsx)(be.a,{color:"disabled",sx:{}}),t.name]}),Object(me.jsx)(se.a,{children:t.leave_type}),Object(me.jsx)(se.a,{children:t.applied_on.substr(0,10)}),Object(me.jsx)(se.a,{children:t.from_date}),Object(me.jsx)(se.a,{children:t.to_date}),Object(me.jsx)(se.a,{style:{paddingLeft:"25px"},children:t.waiting_approval?Object(me.jsx)(he.a,{color:"warning"}):t.admin_approved?Object(me.jsx)(Oe.a,{color:"success"}):Object(me.jsx)(xe.a,{color:"error"})}),Object(me.jsx)(se.a,{style:{paddingLeft:"32px"},children:t.waiting_approval?Object(me.jsx)(he.a,{color:"warning"}):t.admin_approved?t.manager_rejected?Object(me.jsx)(xe.a,{color:"error"}):t.manager_approved?Object(me.jsx)(Oe.a,{color:"success"}):Object(me.jsx)(he.a,{color:"warning"}):Object(me.jsx)(xe.a,{color:"error"})}),"manager"===e.role?Object(me.jsx)(se.a,{align:"center",children:t.manager_rejected||t.manager_approved?t.manager_approved?Object(me.jsx)(K.a,{color:"green",children:"Approved"}):Object(me.jsx)(K.a,{color:"red",children:"Rejected"}):Object(me.jsxs)(le.a,{variant:"contained",children:[Object(me.jsx)(I.a,{color:"success",onClick:function(){Y(t.id),Ce()},children:Object(me.jsx)(pe.a,{})}),Object(me.jsx)(ge,{open:U,onClose:Le,role:"manager",id:Q,webSocket:e.webSocket,fetchLeaves:e.fetchLeaves}),Object(me.jsx)(I.a,{color:"error",onClick:function(){Y(t.id),ke()},children:Object(me.jsx)(ue.a,{})}),Object(me.jsx)(fe,{open:H,onClose:Le,id:Q,role:"manager",webSocket:e.webSocket,fetchLeaves:e.fetchLeaves})]})}):Object(me.jsx)(se.a,{align:"center",children:t.waiting_approval?Object(me.jsxs)(le.a,{variant:"contained",children:[Object(me.jsx)(I.a,{color:"success",onClick:function(){Y(t.id),Ce()},children:Object(me.jsx)(pe.a,{})}),Object(me.jsx)(ge,{open:U,onClose:Le,role:"admin",id:Q,webSocket:e.webSocket,fetchLeaves:e.fetchLeaves}),Object(me.jsx)(I.a,{color:"error",onClick:function(){Y(t.id),ke()},children:Object(me.jsx)(ue.a,{})}),Object(me.jsx)(fe,{open:H,onClose:Le,id:Q,role:"admin",webSocket:e.webSocket,fetchLeaves:e.fetchLeaves})]}):t.manager_approved?Object(me.jsx)(K.a,{color:"green",children:"Accepted"}):t.manager_rejected?Object(me.jsx)(K.a,{color:"red",children:"Rejected"}):t.admin_approved?Object(me.jsx)(K.a,{color:"green",children:"Forwarded"}):Object(me.jsx)(K.a,{color:"red",children:"Rejected"})})]})}))}),Object(me.jsx)(je.a,{children:Object(me.jsx)(ie.a,{children:Object(me.jsx)(de.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],count:e.leaves.length,rowsPerPage:L,page:S,onRowsPerPageChange:function(e){T(parseInt(e.target.value,10)),w(0)},onPageChange:function(e,t){w(t)}})})})]})})}),Object(me.jsx)(ve,{value:Se,index:2,children:Object(me.jsx)(ae.a,{component:ne.a,children:Object(me.jsxs)(ce.a,{style:{minWidth:"500px"},children:[Object(me.jsx)(re.a,{children:Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"S. No."}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},align:"left",children:"Employee Name"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Leave Type"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Applied On"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"From"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"To"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Admin"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Manager"}),"manager"===e.role?Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Approve/Reject"}):Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Forward/Reject"})]})}),Object(me.jsx)(oe.a,{children:(P>0?e.leaves.slice(N*P,N*P+P):e.leaves).map((function(t,a){return"admin"!==e.role||!t.manager_rejected&&t.admin_approved?"manager"===e.role&&t.manager_rejected&&Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{children:t.id}),Object(me.jsxs)(se.a,{align:"left",children:[t.is_online?Object(me.jsx)(be.a,{color:"success",sx:{}}):Object(me.jsx)(be.a,{color:"disabled",sx:{}}),t.name]}),Object(me.jsx)(se.a,{children:t.leave_type}),Object(me.jsx)(se.a,{children:t.applied_on.substr(0,10)}),Object(me.jsx)(se.a,{children:t.from_date}),Object(me.jsx)(se.a,{children:t.to_date}),Object(me.jsx)(se.a,{style:{paddingLeft:"25px"},children:t.waiting_approval?Object(me.jsx)(he.a,{color:"warning"}):t.admin_approved?Object(me.jsx)(Oe.a,{color:"success"}):Object(me.jsx)(xe.a,{color:"error"})}),Object(me.jsx)(se.a,{style:{paddingLeft:"32px"},children:t.waiting_approval?Object(me.jsx)(he.a,{color:"warning"}):t.admin_approved?t.manager_rejected?Object(me.jsx)(xe.a,{color:"error"}):t.manager_approved?Object(me.jsx)(Oe.a,{color:"success"}):Object(me.jsx)(he.a,{color:"warning"}):Object(me.jsx)(xe.a,{color:"error"})}),"manager"===e.role?Object(me.jsx)(se.a,{align:"center",children:t.manager_rejected||t.manager_approved?t.manager_approved?Object(me.jsx)(K.a,{color:"green",children:"Approved"}):Object(me.jsx)(K.a,{color:"red",children:"Rejected"}):Object(me.jsxs)(le.a,{variant:"contained",children:[Object(me.jsx)(I.a,{color:"success",onClick:function(){Y(t.id),Ce()},children:Object(me.jsx)(pe.a,{})}),Object(me.jsx)(ge,{open:U,onClose:Le,role:"manager",id:Q,webSocket:e.webSocket,fetchLeaves:e.fetchLeaves}),Object(me.jsx)(I.a,{color:"error",onClick:function(){Y(t.id),ke()},children:Object(me.jsx)(ue.a,{})}),Object(me.jsx)(fe,{open:H,onClose:Le,id:Q,role:"manager",webSocket:e.webSocket,fetchLeaves:e.fetchLeaves})]})}):Object(me.jsx)(se.a,{align:"center",children:t.waiting_approval?Object(me.jsxs)(le.a,{variant:"contained",children:[Object(me.jsx)(I.a,{color:"success",onClick:function(){Y(t.id),Ce()},children:Object(me.jsx)(pe.a,{})}),Object(me.jsx)(ge,{open:U,onClose:Le,role:"admin",id:Q,webSocket:e.webSocket,fetchLeaves:e.fetchLeaves}),Object(me.jsx)(I.a,{color:"error",onClick:function(){Y(t.id),ke()},children:Object(me.jsx)(ue.a,{})}),Object(me.jsx)(fe,{open:H,onClose:Le,id:Q,role:"admin",webSocket:e.webSocket,fetchLeaves:e.fetchLeaves})]}):t.manager_approved?Object(me.jsx)(K.a,{color:"green",children:"Accepted"}):t.manager_rejected?Object(me.jsx)(K.a,{color:"red",children:"Rejected"}):t.admin_approved?Object(me.jsx)(K.a,{color:"green",children:"Forwarded"}):Object(me.jsx)(K.a,{color:"red",children:"Rejected"})})]}):Object(me.jsx)(me.Fragment,{children:Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{children:t.id}),Object(me.jsxs)(se.a,{align:"left",children:[t.is_online?Object(me.jsx)(be.a,{color:"success",sx:{}}):Object(me.jsx)(be.a,{color:"disabled",sx:{}}),t.name]}),Object(me.jsx)(se.a,{children:t.leave_type}),Object(me.jsx)(se.a,{children:t.applied_on.substr(0,10)}),Object(me.jsx)(se.a,{children:t.from_date}),Object(me.jsx)(se.a,{children:t.to_date}),Object(me.jsx)(se.a,{style:{paddingLeft:"25px"},children:t.waiting_approval?Object(me.jsx)(he.a,{color:"warning"}):t.admin_approved?Object(me.jsx)(Oe.a,{color:"success"}):Object(me.jsx)(xe.a,{color:"error"})}),Object(me.jsx)(se.a,{style:{paddingLeft:"32px"},children:t.waiting_approval?Object(me.jsx)(he.a,{color:"warning"}):t.admin_approved?t.manager_rejected?Object(me.jsx)(xe.a,{color:"error"}):t.manager_approved?Object(me.jsx)(Oe.a,{color:"success"}):Object(me.jsx)(he.a,{color:"warning"}):Object(me.jsx)(xe.a,{color:"error"})}),"manager"===e.role?Object(me.jsx)(se.a,{align:"center",children:t.manager_rejected||t.manager_approved?t.manager_approved?Object(me.jsx)(K.a,{color:"green",children:"Approved"}):Object(me.jsx)(K.a,{color:"red",children:"Rejected"}):Object(me.jsxs)(le.a,{variant:"contained",children:[Object(me.jsx)(I.a,{color:"success",onClick:function(){Y(t.id),Ce()},children:Object(me.jsx)(pe.a,{})}),Object(me.jsx)(ge,{open:U,onClose:Le,role:"manager",id:Q,webSocket:e.webSocket,fetchLeaves:e.fetchLeaves}),Object(me.jsx)(I.a,{color:"error",onClick:function(){Y(t.id),ke()},children:Object(me.jsx)(ue.a,{})}),Object(me.jsx)(fe,{open:H,onClose:Le,id:Q,role:"manager",webSocket:e.webSocket,fetchLeaves:e.fetchLeaves})]})}):Object(me.jsx)(se.a,{align:"center",children:t.waiting_approval?Object(me.jsxs)(le.a,{variant:"contained",children:[Object(me.jsx)(I.a,{color:"success",onClick:function(){Y(t.id),Ce()},children:Object(me.jsx)(pe.a,{})}),Object(me.jsx)(ge,{open:U,onClose:Le,role:"admin",id:Q,webSocket:e.webSocket,fetchLeaves:e.fetchLeaves}),Object(me.jsx)(I.a,{color:"error",onClick:function(){Y(t.id),ke()},children:Object(me.jsx)(ue.a,{})}),Object(me.jsx)(fe,{open:H,onClose:Le,id:Q,role:"admin",webSocket:e.webSocket,fetchLeaves:e.fetchLeaves})]}):t.manager_approved?Object(me.jsx)(K.a,{color:"green",children:"Accepted"}):t.manager_rejected?Object(me.jsx)(K.a,{color:"red",children:"Rejected"}):t.admin_approved?Object(me.jsx)(K.a,{color:"green",children:"Forwarded"}):Object(me.jsx)(K.a,{color:"red",children:"Rejected"})})]})})}))}),Object(me.jsx)(je.a,{children:Object(me.jsx)(ie.a,{children:Object(me.jsx)(de.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],count:e.leaves.length,rowsPerPage:P,page:N,onRowsPerPageChange:function(e){B(parseInt(e.target.value,10)),E(0)},onPageChange:function(e,t){E(t)}})})})]})})}),Object(me.jsx)(ve,{value:Se,index:3,children:Object(me.jsx)(ae.a,{component:ne.a,children:Object(me.jsxs)(ce.a,{style:{minWidth:"500px"},children:[Object(me.jsx)(re.a,{children:Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"S. No."}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},align:"left",children:"Employee Name"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Leave Type"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Applied On"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"From"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"To"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Admin"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Manager"}),"manager"===e.role?Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Approve/Reject"}):Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Forward/Reject"})]})}),Object(me.jsx)(oe.a,{children:(j>0?e.leaves.slice(i*j,i*j+j):e.leaves).map((function(t,a){return Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{children:t.id}),Object(me.jsxs)(se.a,{align:"left",children:[t.is_online?Object(me.jsx)(be.a,{color:"success"}):Object(me.jsx)(be.a,{color:"disabled"}),t.name]}),Object(me.jsx)(se.a,{children:t.leave_type}),Object(me.jsx)(se.a,{children:t.applied_on.substr(0,10)}),Object(me.jsx)(se.a,{children:t.from_date}),Object(me.jsx)(se.a,{children:t.to_date}),Object(me.jsx)(se.a,{style:{paddingLeft:"25px"},children:t.waiting_approval?Object(me.jsx)(he.a,{color:"warning"}):t.admin_approved?Object(me.jsx)(Oe.a,{color:"success"}):Object(me.jsx)(xe.a,{color:"error"})}),Object(me.jsx)(se.a,{style:{paddingLeft:"32px"},children:t.waiting_approval?Object(me.jsx)(he.a,{color:"warning"}):t.admin_approved?t.manager_rejected?Object(me.jsx)(xe.a,{color:"error"}):t.manager_approved?Object(me.jsx)(Oe.a,{color:"success"}):Object(me.jsx)(he.a,{color:"warning"}):Object(me.jsx)(xe.a,{color:"error"})}),"manager"===e.role?Object(me.jsx)(se.a,{align:"center",children:t.manager_rejected||t.manager_approved?t.manager_approved?Object(me.jsx)(K.a,{color:"green",children:"Approved"}):Object(me.jsx)(K.a,{color:"red",children:"Rejected"}):Object(me.jsxs)(le.a,{variant:"contained",children:[Object(me.jsx)(I.a,{color:"success",onClick:function(){Y(t.id),Ce()},children:Object(me.jsx)(pe.a,{})}),Object(me.jsx)(ge,{open:U,onClose:Le,role:"manager",id:Q,webSocket:e.webSocket,fetchLeaves:e.fetchLeaves}),Object(me.jsx)(I.a,{color:"error",onClick:function(){Y(t.id),ke()},children:Object(me.jsx)(ue.a,{})}),Object(me.jsx)(fe,{open:H,onClose:Le,id:Q,role:"manager",webSocket:e.webSocket,fetchLeaves:e.fetchLeaves})]})}):Object(me.jsx)(se.a,{align:"center",children:t.waiting_approval?Object(me.jsxs)(le.a,{variant:"contained",children:[Object(me.jsx)(I.a,{color:"success",onClick:function(){Y(t.id),Ce()},children:Object(me.jsx)(pe.a,{})}),Object(me.jsx)(ge,{open:U,onClose:Le,role:"admin",id:Q,webSocket:e.webSocket,fetchLeaves:e.fetchLeaves}),Object(me.jsx)(I.a,{color:"error",onClick:function(){Y(t.id),ke()},children:Object(me.jsx)(ue.a,{})}),Object(me.jsx)(fe,{open:H,onClose:Le,id:Q,role:"admin",webSocket:e.webSocket,fetchLeaves:e.fetchLeaves})]}):t.manager_approved?Object(me.jsx)(K.a,{color:"green",children:"Accepted"}):t.manager_rejected?Object(me.jsx)(K.a,{color:"red",children:"Rejected"}):t.admin_approved?Object(me.jsx)(K.a,{color:"green",children:"Forwarded"}):Object(me.jsx)(K.a,{color:"red",children:"Rejected"})})]})}))}),Object(me.jsx)(je.a,{children:Object(me.jsx)(ie.a,{children:Object(me.jsx)(de.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],count:e.leaves.length,rowsPerPage:j,page:i,onRowsPerPageChange:function(e){b(parseInt(e.target.value,10)),s(0)},onPageChange:function(e,t){s(t)}})})})]})})})]})},Se=a(393),we=a(448);var Ce=function(){return Object(me.jsx)("div",{children:Object(me.jsxs)(Se.a,{spacing:2,children:[Object(me.jsxs)("div",{style:{alignSelf:"center"},children:[Object(me.jsx)(I.a,{children:Object(me.jsx)(we.a,{alt:"Avinash Kumar",src:"https://scontent.fmaa8-1.fna.fbcdn.net/v/t1.6435-9/103782454_804215123443464_8638898312476848541_n.jpg?_nc_cat=107&ccb=1-5&_nc_sid=09cbfe&_nc_ohc=bU_UglI1TnsAX_zrnQT&_nc_ht=scontent.fmaa8-1.fna&oh=e8c20ddaa4954a3e85d237f8becafc09&oe=61A46415",sx:{width:200,height:200}})}),Object(me.jsx)(K.a,{variant:"h5",component:"h5",children:"Username: avi1152"})]}),Object(me.jsx)("div",{})]})})},ke=a(449),Le=a(443),Te=a(394),We=a(398);var Ae=function(e){Object(n.useEffect)((function(){N()}),[]);var t=Object(n.useState)(!1),a=Object(d.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)([]),s=Object(d.a)(i,2),o=s[0],l=s[1],b=Object(n.useState)(""),h=Object(d.a)(b,2),O=h[0],x=h[1],p=Object(n.useState)(""),u=Object(d.a)(p,2),m=u[0],g=u[1],f=Object(n.useState)(!1),v=Object(d.a)(f,2),y=v[0],_=v[1],S=Object(n.useState)(!1),w=Object(d.a)(S,2),C=w[0],k=w[1],L=Object(n.useState)(""),T=Object(d.a)(L,2),W=T[0],A=T[1],N=function(){return fetch("http://127.0.0.1:8000/dept/add-dept").then((function(e){return e.json()})).then((function(e){l(Object(j.a)(e))}))},E=function(){x(""),g("")},D=function(){k(!1),r(!1),E()},R=function(e){e.preventDefault(),x(e.target.value)},P=function(e){e.preventDefault(),g(e.target.value)};return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(ke.a,{container:!0,spacing:0,sx:{width:1600},children:[Object(me.jsx)(ke.a,{item:!0,xs:4,children:Object(me.jsx)(K.a,{variant:"h4",children:"Departments"})}),Object(me.jsx)(ke.a,{item:!0,xs:4}),Object(me.jsxs)(ke.a,{item:!0,xs:4,children:[Object(me.jsx)(Z.a,{variant:"outlined",onClick:function(){r(!0)},children:"Add Department"}),Object(me.jsx)(X.a,{open:c,onClose:D,children:Object(me.jsxs)($.a,{sx:{width:600,paddingBottom:2,paddingLeft:1,paddingRight:1},children:[Object(me.jsx)(Q.a,{children:"Add Department"}),Object(me.jsx)(Te.a,{children:Object(me.jsx)("form",{children:Object(me.jsxs)(Se.a,{spacing:3,children:[Object(me.jsx)(Le.a,{id:"dept_name",type:"text",fullWidth:!0,variant:"standard",label:"Department Name",value:O,onChange:R}),Object(me.jsx)(Le.a,{id:"dept_code",type:"text",fullWidth:!0,variant:"standard",label:"Department Code",value:m,onChange:P})]})})}),Object(me.jsxs)(Y.a,{children:[Object(me.jsx)(Z.a,{color:"primary",onClick:function(){_(!0);var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dept_name:O,dept_code:m})};fetch("http://127.0.0.1:8000/dept/add-dept",t).then((function(e){return e.json()})).then((function(t){N(),e.fetchNumOfDepts(),r(!1),E(),_(!1)}))},disabled:y,children:"Add"}),Object(me.jsx)(Z.a,{color:"error",onClick:D,children:"Cancel"})]})]})})]})]}),Object(me.jsx)(ne.a,{elevation:1,sx:{marginTop:6},children:Object(me.jsx)(ae.a,{children:Object(me.jsxs)(ce.a,{children:[Object(me.jsx)(re.a,{children:Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"S. No."}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Department Name"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Department Code"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Created On"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Edit"})]})}),Object(me.jsx)(oe.a,{children:o.map((function(e,t){return Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{children:t+1}),Object(me.jsx)(se.a,{children:e.dept_name}),Object(me.jsx)(se.a,{children:e.dept_code}),Object(me.jsx)(se.a,{children:e.created_on.substr(0,10)}),Object(me.jsxs)(se.a,{children:[Object(me.jsx)(I.a,{onClick:function(){x(e.dept_name),g(e.dept_code),A(e.dept_code),k(!0)},children:Object(me.jsx)(We.a,{htmlColor:"yellow"})}),Object(me.jsx)(X.a,{open:C,onClose:D,children:Object(me.jsxs)($.a,{sx:{width:600,paddingBottom:2,paddingLeft:1,paddingRight:1},children:[Object(me.jsx)(Q.a,{children:"Edit Department"}),Object(me.jsx)(Te.a,{children:Object(me.jsx)("form",{children:Object(me.jsxs)(Se.a,{spacing:3,children:[Object(me.jsx)(Le.a,{id:"dept_name2",type:"text",fullWidth:!0,variant:"standard",label:"Department Name",value:O,onChange:R}),Object(me.jsx)(Le.a,{id:"dept_code2",type:"text",fullWidth:!0,variant:"standard",label:"Department Code",value:m,onChange:P})]})})}),Object(me.jsxs)(Y.a,{children:[Object(me.jsx)(Z.a,{color:"primary",onClick:function(){!function(){var e={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({dept_name:O,dept_code:m})};fetch("http://127.0.0.1:8000/dept/update-dept/".concat(W),e).then((function(e){return e.json()})).then((function(e){N()})),k(!1),x(""),g("")}()},children:"Edit"}),Object(me.jsx)(Z.a,{color:"error",onClick:function(){k(!1),x(""),g("")},children:"Cancel"})]})]})})]})]})}))})]})})})]})};var Ne=function(e){var t=e.role,a=Object(p.f)();return Object(me.jsx)(me.Fragment,{children:Object(me.jsx)(Z.a,{variant:"contained",onClick:function(){a.push("/".concat(t,"/change-password"))},children:"Change Password"})})},Ee=a(467),De=a(468),Ie=a(437),Re=a(447),Pe=a(441),Be=a(399),Me=a(400),Fe={PaperProps:{style:{maxHeight:224,width:250}}},Ue=["Contract Based","Regular Based"];var Je,Ge=function(e){Object(n.useEffect)((function(){H()}),[]);var t=Object(n.useState)(!1),a=Object(d.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(!1),s=Object(d.a)(i,2),o=s[0],l=s[1],b=Object(n.useState)(!1),h=Object(d.a)(b,2),O=h[0],x=h[1],p=Object(n.useState)([]),u=Object(d.a)(p,2),m=u[0],g=u[1],f=Object(n.useState)(""),v=Object(d.a)(f,2),y=v[0],_=v[1],S=Object(n.useState)(""),w=Object(d.a)(S,2),C=w[0],k=w[1],L=Object(n.useState)(""),T=Object(d.a)(L,2),W=T[0],A=T[1],N=Object(n.useState)(""),E=Object(d.a)(N,2),D=E[0],R=E[1],P=Object(n.useState)(""),B=Object(d.a)(P,2),M=B[0],F=B[1],U=Object(n.useState)([]),J=Object(d.a)(U,2),G=J[0],z=J[1],H=function(){fetch("http://127.0.0.1:8000/leave-types/add-leave-type").then((function(e){return e.json()})).then((function(e){g(Object(j.a)(e))}))},q=function(){l(!1),k(""),_(""),A("")},V=function(){_(""),k(""),A(""),z([])},ee=function(){r(!1),l(!1),x(!1),V()},te=function(e){e.preventDefault(),_(e.target.value)},je=function(e){e.preventDefault(),k(e.target.value)},de=function(e){e.preventDefault(),A(e.target.value)};return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(ke.a,{container:!0,spacing:0,sx:{width:1600},children:[Object(me.jsx)(ke.a,{item:!0,xs:4,children:Object(me.jsx)(K.a,{variant:"h4",children:"Leave Types"})}),Object(me.jsx)(ke.a,{item:!0,xs:4}),Object(me.jsxs)(ke.a,{item:!0,xs:4,children:[Object(me.jsx)(Z.a,{variant:"outlined",onClick:function(){r(!0)},children:"Add Leave Type"}),Object(me.jsx)(X.a,{open:c,onClose:ee,children:Object(me.jsxs)($.a,{sx:{width:600,paddingBottom:2,paddingLeft:1,paddingRight:1},children:[Object(me.jsx)(Q.a,{children:"Add Leave Type"}),Object(me.jsx)(Te.a,{children:Object(me.jsx)("form",{children:Object(me.jsxs)(Se.a,{spacing:3,children:[Object(me.jsx)(Le.a,{id:"leave_type_name",type:"text",fullWidth:!0,variant:"standard",label:"Leave Type Name",value:y,onChange:te}),Object(me.jsx)(Le.a,{id:"leave_type_code",type:"text",fullWidth:!0,variant:"standard",label:"Leave Type Code",value:C,onChange:je}),Object(me.jsx)(Le.a,{id:"leave_type_limit",type:"text",fullWidth:!0,variant:"standard",label:"Leave Type Limit",value:W,onChange:de}),Object(me.jsxs)(Ee.a,{fullWidth:!0,children:[Object(me.jsx)(De.a,{id:"demo-multiple-checkbox-label",children:"Applicable Employee Type"}),Object(me.jsx)(Ie.a,{labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,value:G,onChange:function(e){var t=e.target.value;z("string"===typeof t?t.split(","):t)},renderValue:function(e){return e.join(", ")},MenuProps:Fe,fullWidth:!0,label:"Applicable Employee Type",children:Ue.map((function(e){return Object(me.jsxs)(Re.a,{value:e,children:[Object(me.jsx)(Pe.a,{checked:G.indexOf(e)>-1}),Object(me.jsx)(Be.a,{primary:e})]},e)}))})]})]})})}),Object(me.jsxs)(Y.a,{children:[Object(me.jsx)(Z.a,{color:"primary",onClick:function(){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leave_type_name:y,leave_type_code:C,contract_based:G.includes("Contract Based"),regular_based:G.includes("Regular Based"),limit:W})};fetch("http://127.0.0.1:8000/leave-types/add-leave-type",t).then((function(e){return e.json()})).then((function(t){H(),e.fetchNumOfLeaveTypes()})),r(!1),V()},children:"Add"}),Object(me.jsx)(Z.a,{color:"error",onClick:ee,children:"Cancel"})]})]})})]})]}),Object(me.jsx)(ne.a,{elevation:1,sx:{marginTop:6},children:Object(me.jsx)(ae.a,{children:Object(me.jsxs)(ce.a,{children:[Object(me.jsx)(re.a,{children:Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"S. No."}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Leave Type Name"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Leave Type Code"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Regular Employees"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Contract Employees"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Rule"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Created On"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Edit/Remove"})]})}),Object(me.jsx)(oe.a,{children:m.map((function(t,a){return Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{children:a+1}),Object(me.jsx)(se.a,{children:t.leave_type_name}),Object(me.jsx)(se.a,{style:{paddingLeft:"60px"},children:t.leave_type_code}),Object(me.jsx)(se.a,{style:{paddingLeft:"60px"},children:t.regular_based?Object(me.jsx)(Oe.a,{color:"success"}):Object(me.jsx)(xe.a,{color:"error"})}),Object(me.jsx)(se.a,{style:{paddingLeft:"60px"},children:t.contract_based?Object(me.jsx)(Oe.a,{color:"success"}):Object(me.jsx)(xe.a,{color:"error"})}),Object(me.jsx)(se.a,{children:t.limit}),Object(me.jsx)(se.a,{children:t.created_on.substr(0,10)}),Object(me.jsx)(se.a,{children:Object(me.jsxs)(le.a,{children:[Object(me.jsx)(I.a,{onClick:function(){_(t.leave_type_name),k(t.leave_type_code),A(t.limit),R(t.leave_type_code),l(!0)},children:Object(me.jsx)(We.a,{htmlColor:"yellow"})}),Object(me.jsx)(X.a,{open:o,onClose:ee,children:Object(me.jsxs)($.a,{sx:{width:600,paddingBottom:2,paddingLeft:1,paddingRight:1},children:[Object(me.jsx)(Q.a,{children:"Edit Leave Type"}),Object(me.jsx)(Te.a,{children:Object(me.jsx)("form",{children:Object(me.jsxs)(Se.a,{spacing:3,children:[Object(me.jsx)(Le.a,{id:"leave_type_name2",type:"text",fullWidth:!0,variant:"standard",label:"Leave Type Name",value:y,onChange:te}),Object(me.jsx)(Le.a,{id:"leave_type_code2",type:"text",fullWidth:!0,variant:"standard",label:"Leave Type Code",value:C,onChange:je}),Object(me.jsx)(Le.a,{id:"leave_type_limit2",type:"text",fullWidth:!0,variant:"standard",label:"Leave Type Limit",value:W,onChange:de})]})})}),Object(me.jsxs)(Y.a,{children:[Object(me.jsx)(Z.a,{color:"primary",onClick:function(){!function(){var e={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({leave_type_name:y,leave_type_code:C,limit:W})};fetch("http://127.0.0.1:8000/leave-types/update-leave-type/".concat(D),e).then((function(e){return e.json()})).then((function(e){H()})),l(!1),_(""),k(""),A("")}()},children:"Edit"}),Object(me.jsx)(Z.a,{color:"error",onClick:q,children:"Cancel"})]})]})}),Object(me.jsx)(I.a,{onClick:function(){F(t.leave_type_code),x(!0)},children:Object(me.jsx)(Me.a,{color:"error"})}),Object(me.jsxs)(X.a,{onClose:ee,open:O,children:[Object(me.jsx)(Q.a,{children:Object(me.jsx)(K.a,{children:"Do you want to delete this Leave Type?"})}),Object(me.jsxs)(Y.a,{children:[Object(me.jsx)(Z.a,{color:"error",onClick:function(){fetch("http://127.0.0.1:8000/leave-types/delete-leave-types/".concat(M),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(){H(),e.fetchNumOfLeaveTypes()})),x(!1),_(""),k(""),A("")},children:"Delete"}),Object(me.jsx)(Z.a,{color:"warning",onClick:ee,children:"Cancel"})]})]})]})})]})}))})]})})})]})},ze=a(429),He=a(299),qe=a(433),Ve=a(107);var Xe=function(e){Object(n.useEffect)((function(){At(),Et(),Nt(),Dt(),(Je=new WebSocket("ws://127.0.0.1:8000/ws/update-user")).onmessage=function(e){var t=JSON.parse(e.data);"UPDATE"===t.action&&(t.admin||t.manager)&&At()},Je.onclose=function(e){console.error("Chat socket closed unexpectedly")}}),[]);var t=Object(n.useState)(!1),a=Object(d.a)(t,2),r=a[0],i=a[1],s=Object(n.useState)(!1),o=Object(d.a)(s,2),l=o[0],b=o[1],O=Object(n.useState)(!1),x=Object(d.a)(O,2),p=x[0],u=x[1],m=c.a.useState(null),g=Object(d.a)(m,2),f=g[0],v=g[1],y=Object(n.useState)(null),_=Object(d.a)(y,2),S=_[0],w=_[1],C=Object(n.useState)([]),k=Object(d.a)(C,2),T=k[0],W=k[1],A=Object(n.useState)(""),N=Object(d.a)(A,2),E=N[0],D=N[1],R=Object(n.useState)(""),P=Object(d.a)(R,2),B=P[0],M=P[1],F=Object(n.useState)(""),U=Object(d.a)(F,2),J=U[0],G=U[1],z=Object(n.useState)(""),H=Object(d.a)(z,2),q=H[0],V=H[1],ee=Object(n.useState)(""),te=Object(d.a)(ee,2),je=te[0],de=te[1],he=Object(n.useState)([]),Oe=Object(d.a)(he,2),xe=Oe[0],pe=Oe[1],ue=Object(n.useState)(""),ge=Object(d.a)(ue,2),fe=ge[0],ve=ge[1],ye=Object(n.useState)(""),_e=Object(d.a)(ye,2),we=_e[0],Ce=_e[1],Ae=Object(n.useState)(""),Ne=Object(d.a)(Ae,2),Pe=Ne[0],Be=Ne[1],Fe=Object(n.useState)(null),Ue=Object(d.a)(Fe,2),Ge=Ue[0],Xe=Ue[1],Qe=Object(n.useState)(""),Ke=Object(d.a)(Qe,2),Ye=Ke[0],Ze=Ke[1],$e=Object(n.useState)(""),et=Object(d.a)($e,2),tt=et[0],at=et[1],nt=Object(n.useState)([]),ct=Object(d.a)(nt,2),rt=ct[0],it=ct[1],st=Object(n.useState)([]),ot=Object(d.a)(st,2),lt=ot[0],jt=ot[1],dt=Object(n.useState)(""),bt=Object(d.a)(dt,2),ht=bt[0],Ot=bt[1],xt=Object(n.useState)(""),pt=Object(d.a)(xt,2),ut=pt[0],mt=pt[1],gt=Object(n.useState)(""),ft=Object(d.a)(gt,2),vt=ft[0],yt=ft[1],_t=Object(n.useState)(""),St=Object(d.a)(_t,2),wt=St[0],Ct=St[1],kt=Object(n.useState)(!1),Lt=Object(d.a)(kt,2),Tt=Lt[0],Wt=Lt[1],At=function(){fetch("http://127.0.0.1:8000/accounts/register/employee").then((function(e){return e.json()})).then((function(e){W(Object(j.a)(e))}))},Nt=function(){fetch("http://127.0.0.1:8000/accounts/get-managers/").then((function(e){return e.json()})).then((function(e){it(Object(j.a)(e))}))},Et=function(){fetch("http://127.0.0.1:8000/accounts/get-admins/").then((function(e){return e.json()})).then((function(e){jt(Object(j.a)(e))}))},Dt=function(){return fetch("http://127.0.0.1:8000/dept/add-dept").then((function(e){return e.json()})).then((function(e){pe(Object(j.a)(e))}))},It=function(){i(!1),v(null),G(""),D(""),M(""),Ot(""),mt(""),yt(""),V(""),de(""),ve(""),Ce(""),Be(""),Xe(null)},Rt=function(){i(!1),b(!1),u(!1),It()},Pt=function(){b(!1),v(null),G(""),D(""),M(""),V(""),de(""),ve(""),Ce(""),Be(""),Xe(null)},Bt=function(){var e={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({first_name:E,last_name:B,employee_id:q,department_code:je,phone_number:fe,flat:we,town:Pe,state:S})};fetch("http://127.0.0.1:8000/accounts/update/".concat(Ye),e).then((function(e){return e.json()})).then((function(e){At()})),b(!1),v(null),G(""),D(""),M(""),V(""),de(""),ve(""),Ce(""),Be(""),Xe(null)},Mt=function(e){"employee_first_name"===e.target.id?D(e.target.value):"employee_last_name"===e.target.id?M(e.target.value):"employee_username"===e.target.id?G(e.target.value):"employee_id"===e.target.id?V(e.target.value):"employee_department_code"===e.target.id?de(e.target.value):"employee_number"===e.target.id?ve(e.target.value):"employee_flat"===e.target.id?Ce(e.target.value):"employee_town"===e.target.id?Be(e.target.value):"employee_email"===e.target.id?Ct(e.target.value):w(e.target.value)},Ft=function(e){"employee_first_name2"===e.target.id?D(e.target.value):"employee_last_name2"===e.target.id?M(e.target.value):"employee_username2"===e.target.id?G(e.target.value):"employee_id2"===e.target.id?V(e.target.value):"employee_department_code2"===e.target.id?de(e.target.value):"employee_number2"===e.target.id?ve(e.target.value):"employee_flat2"===e.target.id?Ce(e.target.value):"employee_town2"===e.target.id?Be(e.target.value):w(e.target.value)};return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(ke.a,{container:!0,spacing:0,sx:{width:1600},children:[Object(me.jsx)(ke.a,{item:!0,xs:4,children:Object(me.jsx)(K.a,{variant:"h4",children:"Employee Data"})}),Object(me.jsx)(ke.a,{item:!0,xs:4}),Object(me.jsxs)(ke.a,{item:!0,xs:4,children:[Object(me.jsx)(Z.a,{variant:"outlined",onClick:function(){i(!0)},children:"Add Employee"}),Object(me.jsx)(X.a,{open:r,onClose:Rt,children:Object(me.jsxs)($.a,{sx:{width:600,paddingBottom:2,paddingLeft:1,paddingRight:1},children:[Object(me.jsx)(Q.a,{children:"Add Employee"}),Object(me.jsx)(Te.a,{children:Object(me.jsx)("form",{children:Object(me.jsxs)(Se.a,{spacing:3,children:[Object(me.jsxs)("div",{style:{display:"flex"},children:[Object(me.jsx)(Le.a,{id:"employee_first_name",type:"text",variant:"standard",label:"First Name",style:{marginRight:15},value:E,onChange:Mt}),Object(me.jsx)(Le.a,{id:"employee_last_name",type:"text",variant:"standard",label:"Last Name",value:B,onChange:Mt})]}),Object(me.jsx)(Le.a,{id:"employee_username",type:"text",fullWidth:!0,variant:"standard",label:"Employee Username",value:J,onChange:Mt}),Object(me.jsx)(Le.a,{id:"employee_email",type:"text",fullWidth:!0,variant:"standard",label:"Employee Email",value:wt,onChange:Mt}),Object(me.jsx)(Le.a,{id:"employee_id",type:"text",fullWidth:!0,variant:"standard",label:"Employee ID",value:q,onChange:Mt}),Object(me.jsxs)(Ee.a,{sx:{m:1,minWidth:120},children:[Object(me.jsx)(De.a,{id:"employee-department-helper-label",children:"Employee Department"}),Object(me.jsx)(Ie.a,{labelId:"employee-department-helper-label",id:"employee-department-helper",value:je,label:"Employee Department",onChange:function(e){return de(e.target.value)},children:xe.map((function(e,t){return Object(me.jsx)(Re.a,{value:e.dept_code,children:e.dept_name},t)}))})]}),Object(me.jsx)(He.b,{dateAdapter:ze.a,children:Object(me.jsx)(qe.a,{label:"Date of Birth",value:f,onChange:function(e){v(e)},renderInput:function(e){return Object(me.jsx)(Le.a,Object(h.a)({},e))}})}),Object(me.jsx)(He.b,{dateAdapter:ze.a,children:Object(me.jsx)(qe.a,{label:"Joining Date",value:Ge,onChange:function(e){Xe(e)},renderInput:function(e){return Object(me.jsx)(Le.a,Object(h.a)({},e))}})}),Object(me.jsxs)(Ee.a,{sx:{m:1,minWidth:120},children:[Object(me.jsx)(De.a,{id:"employee-helper-label",children:"Employee Type"}),Object(me.jsxs)(Ie.a,{labelId:"employee-helper-label",id:"employee-helper",value:vt,label:"Employee Type",onChange:function(e){return yt(e.target.value)},children:[Object(me.jsx)(Re.a,{value:"regular",children:"Regular Employee"}),Object(me.jsx)(Re.a,{value:"contract",children:"Contract Employee"})]})]}),Object(me.jsx)(Le.a,{id:"employee_number",type:"tel",fullWidth:!0,variant:"standard",label:"Employee Phone Number",value:fe,onChange:Mt}),Object(me.jsxs)(Ee.a,{sx:{m:1,minWidth:120},children:[Object(me.jsx)(De.a,{id:"admin-helper-label",children:"Assign Admin"}),Object(me.jsx)(Ie.a,{labelId:"admin-helper-label",id:"admin-helper",value:ut,label:"Assign Admin",onChange:function(e){return mt(e.target.value)},children:lt.map((function(e){return Object(me.jsx)(Re.a,{value:e.username,children:e.first_name+" "+e.last_name})}))})]}),Object(me.jsxs)(Ee.a,{sx:{m:1,minWidth:120},children:[Object(me.jsx)(De.a,{id:"manager-helper-label",children:"Assign Manager"}),Object(me.jsx)(Ie.a,{labelId:"manager-helper-label",id:"manager-helper",value:ht,label:"Assign Manager",onChange:function(e){return Ot(e.target.value)},children:rt.map((function(e){return Object(me.jsx)(Re.a,{value:e.username,children:e.first_name+" "+e.last_name})}))})]}),Object(me.jsx)(L.a,{}),Object(me.jsx)(K.a,{children:"Address"}),Object(me.jsx)(Le.a,{id:"employee_flat",type:"text",fullWidth:!0,variant:"standard",label:"Flat, House no., Building, Company, Apartment",value:we,onChange:Mt}),Object(me.jsx)(Le.a,{id:"employee_town",type:"text",fullWidth:!0,variant:"standard",label:"Town/City",value:Pe,onChange:Mt}),Object(me.jsxs)(Ee.a,{sx:{m:1,minWidth:120},children:[Object(me.jsx)(De.a,{id:"state-helper-label",children:"State"}),Object(me.jsx)(Ie.a,{labelId:"state-helper-label",id:"state-helper",value:S,label:"State",onChange:Mt,children:Object(Ve.getStates)("in").map((function(e,t){return Object(me.jsx)(Re.a,{value:e,children:e})}))})]})]})})}),Object(me.jsxs)(Y.a,{children:[Object(me.jsx)(Z.a,{color:"primary",onClick:function(){Wt(!0);var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:J,first_name:E,last_name:B,employee_id:q,dob:f.toISOString().slice(0,10),department_code:je,phone_number:fe,joining_date:Ge.toISOString().slice(0,10),flat:we,town:Pe,state:S,manager:ht,admin:ut,email:wt,contract:"contract"===vt,regular:"regular"===vt})};fetch("http://127.0.0.1:8000/accounts/register/employee",t).then((function(e){return e.json()})).then((function(t){At(),It(),e.fetchNumOfEmployees()}))},disabled:Tt,children:"Add"}),Object(me.jsx)(Z.a,{color:"error",onClick:Rt,children:"Cancel"})]})]})})]})]}),Object(me.jsx)(ne.a,{elevation:1,sx:{marginTop:6},children:Object(me.jsx)(ae.a,{children:Object(me.jsxs)(ce.a,{children:[Object(me.jsx)(re.a,{children:Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"S. No."}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Employee Name"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Employee Type"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Employee ID"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Employee Department"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Edit/Remove"})]})}),Object(me.jsx)(oe.a,{children:T.map((function(t,a){return Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{children:a+1}),Object(me.jsxs)(se.a,{children:[t.online?Object(me.jsx)(be.a,{color:"success",sx:{}}):Object(me.jsx)(be.a,{color:"disabled",sx:{}}),t.first_name+" "+t.last_name]}),Object(me.jsx)(se.a,{children:t.contract_based?"Contract":"Regular"}),Object(me.jsx)(se.a,{children:t.employee_id}),Object(me.jsx)(se.a,{children:t.department_code}),Object(me.jsx)(se.a,{children:Object(me.jsxs)(le.a,{children:[Object(me.jsx)(I.a,{disabled:t.disabled,onClick:function(){v(t.dob),G(t.username),D(t.first_name),M(t.last_name),V(t.employee_id),de(t.department_code),ve(t.phone_number),Ce(t.flat),Be(t.town),Xe(t.joining_date),w(t.state),Ze(t.username),b(!0)},children:Object(me.jsx)(We.a,{htmlColor:"yellow",sx:{color:t.disabled?"gray":"yellow"}})}),Object(me.jsx)(X.a,{open:l,onClose:Rt,children:Object(me.jsxs)($.a,{sx:{width:600,paddingBottom:2,paddingLeft:1,paddingRight:1},children:[Object(me.jsx)(Q.a,{children:"Add Employee"}),Object(me.jsx)(Te.a,{children:Object(me.jsx)("form",{children:Object(me.jsxs)(Se.a,{spacing:3,children:[Object(me.jsxs)("div",{style:{display:"flex"},children:[Object(me.jsx)(Le.a,{id:"employee_first_name2",type:"text",variant:"standard",label:"First Name",style:{marginRight:15},value:E,onChange:Ft}),Object(me.jsx)(Le.a,{id:"employee_last_name2",type:"text",variant:"standard",label:"Last Name",value:B,onChange:Ft})]}),Object(me.jsx)(Le.a,{id:"employee_id2",type:"text",fullWidth:!0,variant:"standard",label:"Employee ID",value:q,onChange:Ft}),Object(me.jsx)(Le.a,{id:"employee_department_code2",type:"text",fullWidth:!0,variant:"standard",label:"Employee Department",value:je,onChange:Ft}),Object(me.jsx)(Le.a,{id:"employee_number2",type:"tel",fullWidth:!0,variant:"standard",label:"Employee Phone Number",value:fe,onChange:Ft}),Object(me.jsx)(L.a,{}),Object(me.jsx)(K.a,{children:"Address"}),Object(me.jsx)(Le.a,{id:"employee_flat2",type:"text",fullWidth:!0,variant:"standard",label:"Flat, House no., Building, Company, Apartment",value:we,onChange:Ft}),Object(me.jsx)(Le.a,{id:"employee_town2",type:"text",fullWidth:!0,variant:"standard",label:"Town/City",value:Pe,onChange:Ft}),Object(me.jsxs)(Ee.a,{sx:{m:1,minWidth:120},children:[Object(me.jsx)(De.a,{id:"state-helper-label2",children:"State"}),Object(me.jsx)(Ie.a,{labelId:"state-helper-label2",id:"state-helper2",value:S,label:"State",onChange:Ft,children:Object(Ve.getStates)("in").map((function(e,t){return Object(me.jsx)(Re.a,{value:e,children:e})}))})]})]})})}),Object(me.jsxs)(Y.a,{children:[Object(me.jsx)(Z.a,{color:"primary",onClick:Bt,children:"Edit"}),Object(me.jsx)(Z.a,{color:"error",onClick:Pt,children:"Cancel"})]})]})}),Object(me.jsx)(I.a,{disabled:t.disabled,onClick:function(){at(t.username),u(!0)},children:Object(me.jsx)(Me.a,{color:"error",sx:{color:t.disabled?"gray":"red"}})}),Object(me.jsxs)(X.a,{onClose:Rt,open:p,children:[Object(me.jsx)(Q.a,{children:Object(me.jsx)(K.a,{children:"Do you want to remove this Employee?"})}),Object(me.jsxs)(Y.a,{children:[Object(me.jsx)(Z.a,{color:"error",onClick:function(){fetch("http://127.0.0.1:8000/accounts/delete/".concat(tt),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(){At(),e.fetchNumOfEmployees(),e.fetchLeaves()})),u(!1)},children:"Delete"}),Object(me.jsx)(Z.a,{color:"warning",onClick:Rt,children:"Cancel"})]})]})]})})]})}))})]})})})]})},Qe=a(229);function Ke(e,t){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(l.a)(o.a.mark((function e(t,a){var n,c,r,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(h.a)({},a))},e.prev=1,t({type:"REQUEST_LOGIN"}),e.next=5,fetch("http://127.0.0.1:8000/accounts/login/",n);case 5:return c=e.sent,e.next=8,c.json();case 8:if(!(r=e.sent).user){e.next=20;break}return e.next=12,fetch("http://127.0.0.1:8000/accounts/token/",n);case 12:return i=e.sent,e.next=15,i.json();case 15:return s=e.sent,r=Object(h.a)(Object(h.a)({},r),{},{auth_access_token:s.access,auth_refresh_token:s.refresh}),t({type:"LOGIN_SUCCESS",payload:r}),localStorage.setItem("currentUser",JSON.stringify(r)),e.abrupt("return",r);case 20:return t({type:"LOGIN_ERROR",error:r.errors[0]}),e.abrupt("return",r);case 24:e.prev=24,e.t0=e.catch(1),t({type:"LOGIN_ERROR",error:e.t0});case 27:case"end":return e.stop()}}),e,null,[[1,24]])})))).apply(this,arguments)}function Ze(e,t){return $e.apply(this,arguments)}function $e(){return($e=Object(l.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(h.a)({},a))},fetch("http://127.0.0.1:8000/accounts/logout/",n).then((function(e){return e.json()})).then((function(e){t({type:"LOGOUT"}),localStorage.removeItem("currentUser"),localStorage.removeItem("auth_access_token"),localStorage.removeItem("auth_refresh_token")}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e,t){return tt.apply(this,arguments)}function tt(){return(tt=Object(l.a)(o.a.mark((function e(t,a){var n,c,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(h.a)({},a))},e.next=3,fetch("http://127.0.0.1:8000/accounts/get-user/",n);case 3:return c=e.sent,e.next=6,c.json();case 6:r=e.sent,i={user:r,auth_access_token:JSON.parse(localStorage.getItem("currentUser")).auth_access_token,auth_refresh_token:JSON.parse(localStorage.getItem("currentUser")).auth_refresh_token},t({type:"UPDATE_USER_DETAILS",payload:i}),localStorage.setItem("currentUser",JSON.stringify(i));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var at={user:localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")).user:"",access_token:localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")).auth_access_token:"",refresh_token:localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")).auth_refresh_token:"",loading:!1,errorMessage:null},nt=function(e,t){switch(t.type){case"REQUEST_LOGIN":return Object(h.a)(Object(h.a)({},e),{},{loading:!0});case"LOGIN_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{user:t.payload.user,access_token:t.payload.auth_access_token,refresh_token:t.payload.auth_refresh_token,loading:!1});case"LOGOUT":return Object(h.a)(Object(h.a)({},e),{},{user:"",access_token:"",refresh_token:""});case"LOGIN_ERROR":return Object(h.a)(Object(h.a)({},e),{},{loading:!1,errorMessage:t.error});case"UPDATE_USER_DETAILS":return Object(h.a)(Object(h.a)({},e),{},{user:t.payload.user,access_token:t.payload.auth_access_token,refresh_token:t.payload.auth_refresh_token});default:throw new Error("Unhandled action type: ".concat(t.type))}},ct=Object(n.createContext)(),rt=Object(n.createContext)();function it(){var e=c.a.useContext(ct);if(void 0===e)throw new Error("useAuthState must be used within a AuthProvider");return e}function st(){var e=c.a.useContext(rt);if(void 0===e)throw new Error("useAuthDispatch must be used within a AuthProvider");return e}var ot=function(e){var t=e.children,a=Object(n.useReducer)(nt,at),c=Object(d.a)(a,2),r=c[0],i=c[1];return Object(me.jsx)(ct.Provider,{value:r,children:Object(me.jsx)(rt.Provider,{value:i,children:t})})};var lt=function(e){var t=e.open,a=e.anchorEl,c=e.handleNotificationsMenuClose,r=Object(n.useState)([]),i=Object(d.a)(r,2),s=(i[0],i[1],it().user);Object(n.useEffect)((function(){o()}),[]);var o=function(){fetch("http://127.0.0.1:8000/notifications/get-notifications/".concat(s.username,"/")).then((function(e){return e.json()})).then((function(e){console.log("===================================="),console.log(e),console.log("====================================")}))};return Object(me.jsxs)(Qe.a,{open:t,elevation:0,anchorEl:a,keepMounted:!0,id:"primary-profile-notifications-menu",onClose:c,style:{marginTop:-755,marginLeft:1450},children:[Object(me.jsx)(Re.a,{children:"Item1Item1Item1Item1Item1Item1Item1Item1Item1Item1"}),Object(me.jsx)(Re.a,{children:"Item2"}),Object(me.jsx)(Re.a,{children:"Item3"})]})};var jt=function(e){var t=Object(n.useRef)(document.title);Object(n.useEffect)((function(e){return function(e){e||(document.title=t.current)}}),[]),Object(n.useEffect)((function(){document.title=e}),[e])},dt=a(308),bt=a(442),ht=a(435),Ot=a(404),xt=a(405),pt=Object(O.a)({textField:{width:400}});var ut=function(){var e=it().user,t=pt(),a=Object(n.useState)(!1),c=Object(d.a)(a,2),r=c[0],i=c[1],s=Object(n.useState)(""),o=Object(d.a)(s,2),l=o[0],j=o[1],b=Object(n.useState)(!1),h=Object(d.a)(b,2),O=h[0],x=h[1],p=Object(n.useState)(""),u=Object(d.a)(p,2),m=u[0],g=u[1],f=Object(n.useState)(!1),v=Object(d.a)(f,2),y=v[0],_=v[1],S=Object(n.useState)(""),w=Object(d.a)(S,2),C=w[0],k=w[1],L=Object(n.useState)(!1),T=Object(d.a)(L,2),W=T[0],A=T[1],N=Object(n.useState)(""),E=Object(d.a)(N,2),D=E[0],R=E[1],P=Object(n.useState)(""),B=Object(d.a)(P,2),M=B[0],F=B[1],U=Object(n.useState)(!1),J=Object(d.a)(U,2),G=J[0],z=J[1];return Object(me.jsx)(me.Fragment,{children:Object(me.jsxs)("form",{children:[Object(me.jsx)(K.a,{variant:"h5",sx:{marginBottom:3},children:"Change Password"}),Object(me.jsx)(K.a,{variant:"subtitle1",sx:{marginBottom:5},children:"Please provide with the Credentials below:"}),Object(me.jsxs)(Se.a,{spacing:2,children:[Object(me.jsx)(Le.a,{label:"Old Password",type:O?"text":"password",required:!0,onChange:function(e){j(e.target.value)},className:t.textField,InputProps:{endAdornment:Object(me.jsx)(dt.a,{position:"end",children:Object(me.jsx)(I.a,{tabIndex:-1,"aria-label":"toggle password visibility",onClick:function(){x(!O)},onMouseDown:function(){x(!O)},children:O?Object(me.jsx)(Ot.a,{}):Object(me.jsx)(xt.a,{})})})},sx:{marginBottom:2}}),Object(me.jsx)(Le.a,{label:"New Password",required:!0,type:y?"text":"password",value:m,onChange:function(e){g(e.target.value)},className:t.textField,InputProps:{endAdornment:Object(me.jsx)(dt.a,{position:"end",children:Object(me.jsx)(I.a,{tabIndex:-1,"aria-label":"toggle password visibility",onClick:function(){_(!y)},onMouseDown:function(){_(!y)},children:y?Object(me.jsx)(Ot.a,{}):Object(me.jsx)(xt.a,{})})})}}),Object(me.jsx)(Le.a,{label:"Confirm New Password",required:!0,type:W?"text":"password",value:C,onChange:function(e){k(e.target.value)},className:t.textField,InputProps:{endAdornment:Object(me.jsx)(dt.a,{position:"end",children:Object(me.jsx)(I.a,{tabIndex:-1,"aria-label":"toggle password visibility",onClick:function(){A(!W)},onMouseDown:function(){A(!W)},children:W?Object(me.jsx)(Ot.a,{}):Object(me.jsx)(xt.a,{})})})}})]}),Object(me.jsx)(Z.a,{sx:{marginTop:3,color:"red"},onClick:function(t){if(z(!0),l?m?C?m===C||(R("Password does not match!"),i(!0),0):(R("Empty Confirm New Password!"),i(!0),0):(R("Empty New Password!"),i(!0),0):(R("Empty Old Password!"),i(!0),0)){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,old_password:l,new_password:m})};fetch("http://127.0.0.1:8000/accounts/change-password/",a).then((function(e){return e.json()})).then((function(e){z(!1),e.errorMessage?R(e.errorMessage):F(e.successMessage),i(!0),setTimeout((function(){R(""),F("")}),2e3)}))}else z(!1)},disabled:G,children:"Set Password"}),Object(me.jsx)(bt.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:r,onClose:function(){i(!1)},autoHideDuration:2e3,children:Object(me.jsx)(ht.a,{variant:"filled",severity:D?"error":"success",onClose:function(){i(!1)},children:D||M})},"topcenter")]})})},mt=a(406),gt=a(194);a(286);var ft=function(e){var t=e.leaves;return Object(n.useEffect)((function(){}),[t]),Object(me.jsx)(ae.a,{component:ne.a,sx:{marginTop:5},children:Object(me.jsxs)(ce.a,{style:{minWidth:"500px"},children:[Object(me.jsx)(re.a,{children:Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"S. No."}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},align:"left",children:"Leave ID"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},align:"left",children:"Employee Name"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Leave Type"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"From"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"To"})]})}),Object(me.jsx)(oe.a,{children:t.map((function(e,t){return Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{children:t+1}),Object(me.jsx)(se.a,{children:e.id}),Object(me.jsx)(se.a,{align:"left",children:e.name}),Object(me.jsx)(se.a,{children:e.leave_type}),Object(me.jsx)(se.a,{children:e.from_date}),Object(me.jsx)(se.a,{children:e.to_date})]},e.id)}))})]})})};var vt,yt=function(e){var t=e.leaves,a=Object(n.useState)([]),c=Object(d.a)(a,2),r=c[0],i=c[1];return Object(n.useEffect)((function(){console.log(t)}),[]),Object(me.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(me.jsx)("div",{style:{alignSelf:"center",marginBottom:10},children:Object(me.jsx)(gt.a,{onChange:function(e){i(t.filter((function(t){return t.manager_approved&&t.applied_on.slice(0,10)==e.toISOString().slice(0,10)})))}})}),Object(me.jsx)(mt.a,{}),Object(me.jsx)("div",{children:Object(me.jsx)(ft,{leaves:r})})]})},_t=Object(O.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(h.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(b.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{marginTop:"120px"},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},menuStyle:{marginTop:"40px"}}})),St=function(e){var t=e.w,a=e.h,n=e.mt,c=e.ml;return Object(me.jsx)("div",{style:{backgroundColor:"lightgrey",width:t,height:a,borderRadius:"3px",marginLeft:c,marginTop:n}})};var wt=function(e){jt("ELMS   |   Manager");var t=Object(p.f)(),a=st(),r=it().user,i=_t(),s=Object(n.useState)(!0),b=Object(d.a)(s,2),h=b[0],O=b[1],z=Object(n.useState)(0),V=Object(d.a)(z,2),X=V[0],Q=(V[1],c.a.useState(null)),K=Object(d.a)(Q,2),Y=K[0],Z=K[1],$=c.a.useState(!1),ee=Object(d.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(null),ce=Object(d.a)(ne,2),re=ce[0],ie=ce[1],se=Object(n.useState)(null),oe=Object(d.a)(se,2),le=oe[0],je=oe[1],de=Object(n.useState)(null),be=Object(d.a)(de,2),he=be[0],Oe=be[1],xe=Object(n.useState)(!1),pe=Object(d.a)(xe,2),ue=pe[0],ge=pe[1],fe=Object(n.useState)(!1),ve=Object(d.a)(fe,2),ye=(ve[0],ve[1]),Se=Object(n.useState)([]),we=Object(d.a)(Se,2),ke=we[0],Le=we[1],Te=Object(n.useState)([]),We=Object(d.a)(Te,2),Ee=We[0],De=We[1];Object(n.useEffect)((function(){Pe(),Be(),Me(),Ie(),Re(),(vt=new WebSocket("ws://127.0.0.1:8000/ws/update-user")).onmessage=function(e){JSON.parse(e.data).manager&&Ie()},vt.onclose=function(e){console.error("Chat socket closed unexpectedly")}}),[]);var Ie=function(){fetch("http://127.0.0.1:8000/leaves/get-manager-leaves/".concat(r.username,"/")).then((function(e){return e.json()})).then((function(e){Le(Object(j.a)(e))}))},Re=function(){fetch("http://127.0.0.1:8000/leaves/get-all-leaves/").then((function(e){return e.json()})).then((function(e){De(Object(j.a)(e))}))},Pe=function(){fetch("http://127.0.0.1:8000/accounts/number-employees/").then((function(e){return e.json()})).then((function(e){ie(e.length)}))},Be=function(){fetch("http://127.0.0.1:8000/dept/number-dept").then((function(e){return e.json()})).then((function(e){je(e.length)}))},Me=function(){fetch("http://127.0.0.1:8000/leave-types/number-leave-types").then((function(e){return e.json()})).then((function(e){Oe(e.length)}))},Fe=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(a,{username:r.username,webSocket:vt});case 2:t.push("/login");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ue=Object(me.jsxs)(m.a,{className:i.menuStyle,elevation:0,anchorEl:Y,anchorOrigin:{vertical:"bottom",horizontal:"right"},id:"primary-profile-account-menu",transformOrigin:{vertical:"top",horizontal:"center"},open:te,onClose:function(){ae(!1)},children:[Object(me.jsxs)(g.a,{onClick:function(){ae(!1),t.push("/manager/settings")},children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(P.a,{})}),Object(me.jsx)(v.a,{children:"Settings"})]}),Object(me.jsxs)(g.a,{onClick:Fe,children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(B.a,{})}),Object(me.jsx)(v.a,{children:"Logout"})]})]});return Object(me.jsxs)("div",{className:i.root,children:[Object(me.jsx)(y.a,{}),Object(me.jsx)(_.a,{position:"absolute",className:Object(q.a)(i.appBar,h&&i.appBarShift),children:Object(me.jsxs)(S.a,{className:i.toolbar,children:[Object(me.jsx)(I.a,{edge:"start",color:"inherit","aria-label":"open drawer",className:Object(q.a)(i.menuButton,h&&i.menuButtonHidden),onClick:function(){O(!0)},children:Object(me.jsx)(H.a,{})}),Object(me.jsx)(w.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:i.title,children:"LMS Dashboard (Manager)"}),Object(me.jsx)(I.a,{color:"inherit",onClick:function(e){e.preventDefault(),ye(e.currentTarget),ge(!0)},"aria-label":"notifications of current user","aria-controls":"primary-profile-notifications-menu","aria-haspopup":"true",sx:{marginRight:5},children:0===X?Object(me.jsx)(M.a,{}):Object(me.jsx)(R.a,{badgeContent:X,color:"primary",children:Object(me.jsx)(M.a,{})})}),Object(me.jsx)(lt,{open:ue,handleNotificationsMenuClose:function(){ge(!1)}}),Object(me.jsx)(I.a,{edge:"end","aria-label":"account of current user","aria-controls":"primary-profile-account-menu","aria-haspopup":"true",color:"inherit",onClick:function(e){Z(e.currentTarget),ae(!0)},children:Object(me.jsx)(C.a,{style:{height:"35px",width:"35px"},children:r.first_name.charAt(0)+r.last_name.charAt(0)})}),Ue]})}),Object(me.jsxs)(k.a,{variant:"permanent",classes:{paper:Object(q.a)(i.drawerPaper,!h&&i.drawerPaperClose)},open:h,children:[Object(me.jsx)("div",{className:i.toolbarIcon,children:Object(me.jsx)(I.a,{onClick:function(){O(!1)},children:Object(me.jsx)(F.a,{})})}),Object(me.jsx)(L.a,{}),Object(me.jsxs)(T.a,{children:[Object(me.jsxs)(W.a,{button:!0,onClick:function(){t.push("/manager/")},children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(U.a,{})}),Object(me.jsx)(v.a,{primary:"Dashboard"})]}),Object(me.jsxs)(W.a,{button:!0,onClick:function(e){t.push("/manager/mng-emp")},children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(J.a,{})}),Object(me.jsx)(v.a,{primary:"Manage Employees"})]}),Object(me.jsxs)(W.a,{button:!0,onClick:function(){t.push("/manager/mng-dpt")},children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(G.a,{})}),Object(me.jsx)(v.a,{primary:"Manage Department"})]}),Object(me.jsxs)(W.a,{button:!0,onClick:function(e){t.push("/manager/mng-leave-type")},children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(x.a,{icon:u.a})}),Object(me.jsx)(v.a,{primary:"Manage Leave Type"})]}),Object(me.jsxs)(W.a,{button:!0,onClick:function(){t.push("/manager/leave-calendar")},children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(U.a,{})}),Object(me.jsx)(v.a,{primary:"View Leave Calendar"})]})]}),Object(me.jsx)(L.a,{})]}),Object(me.jsx)("main",{className:i.content,children:Object(me.jsx)("div",{className:i.appBarSpacer,children:Object(me.jsxs)(A.a,{maxWidth:"lg",className:i.container,children:[Object(me.jsx)(p.b,{path:"/manager/",exact:!0,children:Object(me.jsxs)(N.a,{container:!0,spacing:3,justifyContent:"space-around",children:[Object(me.jsx)(N.a,{item:!0,xs:12,md:4,lg:3,children:Object(me.jsx)(E.a,{style:{textAlign:"center"},children:Object(me.jsxs)(D.a,{children:[Object(me.jsx)(w.a,{style:{fontSize:16},color:"textSecondary",children:"Number of Employees"}),Object(me.jsx)(w.a,{variant:"h5",component:"div",children:null!==re?re:Object(me.jsx)(St,{w:"30px",h:"30px",ml:"110px",mt:"3.2px"})})]})})}),Object(me.jsx)(N.a,{item:!0,xs:12,md:4,lg:3,children:Object(me.jsx)(E.a,{style:{textAlign:"center"},children:Object(me.jsxs)(D.a,{children:[Object(me.jsx)(w.a,{style:{fontSize:16},color:"textSecondary",children:"Number of Departments"}),Object(me.jsx)(w.a,{variant:"h5",component:"div",children:null!==le?le:Object(me.jsx)(St,{w:"30px",h:"30px",ml:"110px",mt:"3.2px"})})]})})}),Object(me.jsx)(N.a,{item:!0,xs:12,md:4,lg:4,children:Object(me.jsx)(E.a,{style:{textAlign:"center"},children:Object(me.jsxs)(D.a,{children:[Object(me.jsx)(w.a,{style:{fontSize:16},color:"textSecondary",children:"Number of Leave Types"}),Object(me.jsx)(w.a,{variant:"h5",component:"div",children:null!==he?he:Object(me.jsx)(St,{w:"30px",h:"30px",ml:"160px"})})]})})}),Object(me.jsx)(N.a,{item:!0,xs:12,md:4,lg:12,children:Object(me.jsx)(_e,{role:"manager",leaves:ke,webSocket:vt,fetchLeaves:Ie})})]})}),Object(me.jsx)(p.b,{path:"/manager/profile",exact:!0,children:Object(me.jsx)(Ce,{})}),Object(me.jsx)(p.b,{path:"/manager/mng-dpt",exact:!0,children:Object(me.jsx)(Ae,{fetchNumOfDepts:Be})}),Object(me.jsx)(p.b,{path:"/manager/mng-leave-type",exact:!0,children:Object(me.jsx)(Ge,{fetchNumOfLeaveTypes:Me})}),Object(me.jsx)(p.b,{path:"/manager/mng-emp",exact:!0,children:Object(me.jsx)(Xe,{fetchNumOfEmployees:Pe,fetchLeaves:Ie})}),Object(me.jsx)(p.b,{path:"/manager/settings",exact:!0,children:Object(me.jsx)(Ne,{role:"manager"})}),Object(me.jsx)(p.b,{path:"/manager/change-password",exact:!0,children:Object(me.jsx)(ut,{})}),Object(me.jsx)(p.b,{path:"/manager/leave-calendar",exact:!0,children:Object(me.jsx)(yt,{leaves:Ee})})]})})})]})},Ct=a(88);var kt=function(e){var t=e.component,a=Object(V.a)(e,["component"]),n=it().access_token;return Object(me.jsx)(p.b,Object(h.a)(Object(h.a)({},a),{},{render:function(e){return n?Object(me.jsx)(t,{}):Object(me.jsx)(p.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Lt=a(19),Tt=a(83),Wt=a(94);Lt.f.register(Lt.e,Lt.j,Lt.a,Lt.c,Lt.o,Lt.p,Lt.h);var At=a(473),Nt=a(464),Et=a(397),Dt=a(450),It=a(474),Rt=a(439),Pt=a(426),Bt=a(470),Mt=a(471),Ft=a(472);var Ut=function(e){var t=e.leaves,a=e.name;return Object(n.useEffect)((function(){}),[t]),Object(me.jsx)(ae.a,{component:ne.a,sx:{marginTop:5},children:Object(me.jsxs)(ce.a,{style:{minWidth:"500px"},children:[Object(me.jsx)(re.a,{children:Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"S. No."}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},align:"left",children:"Leave ID"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},align:"left",children:"Employee Name"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Leave Type"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Applied On"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"From"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"To"})]})}),Object(me.jsx)(oe.a,{children:t.map((function(e,t){return Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{children:t+1}),Object(me.jsx)(se.a,{children:e.id}),Object(me.jsx)(se.a,{align:"left",children:a}),Object(me.jsx)(se.a,{children:e.leave_type}),Object(me.jsx)(se.a,{children:e.applied_on.substr(0,10)}),Object(me.jsx)(se.a,{children:e.from_date}),Object(me.jsx)(se.a,{children:e.to_date})]},e.id)}))})]})})};Lt.f.register(Lt.e,Lt.j,Lt.a,Lt.c,Lt.o,Lt.p,Lt.h),String.prototype.toRGB=function(){var e=0;if(0===this.length)return e;for(var t=0;t<this.length;t++)e=this.charCodeAt(t)+((e<<5)-e),e&=e;var a=[0,0,0];for(t=0;t<3;t++){var n=e>>8*t&255;a[t]=n}return"rgb(".concat(a[0],", ").concat(a[1],", ").concat(a[2],")")};var Jt=function(e){var t=e.loaded,a=e.loading,c=e.leaves,r=e.employee,i=(Object(n.useMemo)((function(){return c.length}),[c]),Object(n.useMemo)((function(){var e={};for(var t in c){var a=c[t];a.leave_type in e?e[a.leave_type]+=1:e[a.leave_type]=1}return e}),[c])),s=Object(n.useMemo)((function(){var e={waiting_approval:0,accepted:0,rejected:0};for(var t in c){var a=c[t];a.waiting_approval?e.waiting_approval+=1:a.admin_approved&&a.manager_approved?e.accepted+=1:e.rejected+=1}return e}),[c]);return Object(n.useEffect)((function(){}),[r,a]),t?a?Object(me.jsx)("div",{style:{marginLeft:"50%",marginTop:"25%"},children:Object(me.jsx)(Wt.a,{color:"gray",height:"60",width:"60"})}):Object(me.jsx)(ne.a,{elevation:10,style:{marginTop:"10px"},children:Object(me.jsxs)(ke.a,{container:!0,children:[Object(me.jsx)(ke.a,{item:!0,xs:3,children:Object(me.jsxs)(Bt.a,{children:[Object(me.jsx)(Mt.a,{title:"Employee Name"}),Object(me.jsx)(Ft.a,{children:Object(me.jsx)(K.a,{children:r.first_name+" "+r.last_name})})]})}),Object(me.jsx)(ke.a,{item:!0,xs:1}),Object(me.jsx)(ke.a,{item:!0,xs:3,children:Object(me.jsxs)(Bt.a,{children:[Object(me.jsx)(Mt.a,{title:"Employee ID"}),Object(me.jsx)(Ft.a,{children:Object(me.jsx)(K.a,{children:r.employee_id})})]})}),Object(me.jsx)(ke.a,{item:!0,xs:1}),Object(me.jsx)(ke.a,{item:!0,xs:3,children:Object(me.jsxs)(Bt.a,{children:[Object(me.jsx)(Mt.a,{title:"Employee Type"}),Object(me.jsx)(Ft.a,{children:Object(me.jsx)(K.a,{children:r.contract_based?"Contract Based":"Regular Based"})})]})}),Object(me.jsx)(ke.a,{item:!0,xs:6,marginTop:5,children:Object(me.jsx)("div",{children:Object(me.jsx)(Tt.b,{data:{labels:Object.keys(i),datasets:[{label:"# of Leaves applied in various Leave Types",data:Object.values(i),backgroundColor:Object.keys(i).map((function(e){return e.toRGB()}))}]}})})}),Object(me.jsx)(ke.a,{item:!0,xs:6,marginTop:5,children:Object(me.jsx)("div",{children:Object(me.jsx)(Tt.b,{data:{labels:Object.keys(s),datasets:[{label:"# of Leaves Accepted/Rejected",data:Object.values(s),backgroundColor:Object.keys(s).map((function(e){return e.toRGB()}))}]}})})}),Object(me.jsx)(ke.a,{item:!0,xs:12,marginBottom:5,children:Object(me.jsx)(Ut,{leaves:c,name:r.first_name+" "+r.last_name})})]})}):Object(me.jsx)(me.Fragment,{})};function Gt(e){var t=e.loaded,a=e.loading,n=(e.leaves,e.dept),c=e.numEmp,r=e.pieChartData;return Object(me.jsx)("div",{children:t?a?Object(me.jsx)("div",{style:{marginLeft:"50%",marginTop:"25%"},children:Object(me.jsx)(Wt.a,{color:"gray",height:"60",width:"60"})}):Object(me.jsx)(ne.a,{elevation:10,style:{marginTop:"10px"},children:Object(me.jsxs)(ke.a,{container:!0,children:[Object(me.jsx)(ke.a,{item:!0,xs:3,children:Object(me.jsxs)(Bt.a,{children:[Object(me.jsx)(Mt.a,{title:"Department Name"}),Object(me.jsx)(Ft.a,{children:Object(me.jsx)(K.a,{children:n.dept_name})})]})}),Object(me.jsx)(ke.a,{item:!0,xs:1}),Object(me.jsx)(ke.a,{item:!0,xs:3,children:Object(me.jsxs)(Bt.a,{children:[Object(me.jsx)(Mt.a,{title:"No. of Employees"}),Object(me.jsx)(Ft.a,{children:Object(me.jsx)(K.a,{children:c})})]})}),Object(me.jsx)(ke.a,{item:!0,xs:1}),Object(me.jsx)(ke.a,{item:!0,xs:3,children:Object(me.jsxs)(Bt.a,{children:[Object(me.jsx)(Mt.a,{title:"Department Code"}),Object(me.jsx)(Ft.a,{children:Object(me.jsx)(K.a,{children:n.dept_code})})]})}),Object(me.jsx)(ke.a,{item:!0,xs:3}),Object(me.jsx)(ke.a,{item:!0,xs:6,marginTop:5,children:Object(me.jsx)("div",{children:Object(me.jsx)(Tt.b,{data:{labels:Object.keys(r),datasets:[{label:"# of Leaves Accepted/Rejected",data:Object.values(r),backgroundColor:Object.keys(r).map((function(e){return e.toRGB()}))}]}})})}),Object(me.jsx)(ke.a,{item:!0,xs:3})]})}):Object(me.jsx)(me.Fragment,{})})}Lt.f.register(Lt.e,Lt.j,Lt.a,Lt.c,Lt.o,Lt.p,Lt.h),String.prototype.toRGB=function(){var e=0;if(0===this.length)return e;for(var t=0;t<this.length;t++)e=this.charCodeAt(t)+((e<<5)-e),e&=e;var a=[0,0,0];for(t=0;t<3;t++){var n=e>>8*t&255;a[t]=n}return"rgb(".concat(a[0],", ").concat(a[1],", ").concat(a[2],")")},Lt.f.register(Lt.e,Lt.j,Lt.a,Lt.c,Lt.o,Lt.p,Lt.h),String.prototype.toRGB=function(){var e=0;if(0===this.length)return e;for(var t=0;t<this.length;t++)e=this.charCodeAt(t)+((e<<5)-e),e&=e;var a=[0,0,0];for(t=0;t<3;t++){var n=e>>8*t&255;a[t]=n}return"rgb(".concat(a[0],", ").concat(a[1],", ").concat(a[2],")")};var zt=function(e){var t=e.loaded,a=e.loading,c=e.leaveType,r=e.pieChartData;return Object(n.useEffect)((function(){}),[a]),Object(me.jsx)("div",{children:t?a?Object(me.jsx)("div",{style:{marginLeft:"50%",marginTop:"25%"},children:Object(me.jsx)(Wt.a,{color:"gray",height:"60",width:"60"})}):Object(me.jsx)(ne.a,{elevation:10,style:{marginTop:"10px"},children:Object(me.jsxs)(ke.a,{container:!0,children:[Object(me.jsx)(ke.a,{item:!0,xs:3,children:Object(me.jsxs)(Bt.a,{children:[Object(me.jsx)(Mt.a,{title:"Leave Type Name"}),Object(me.jsx)(Ft.a,{children:Object(me.jsx)(K.a,{children:c.leave_type_name})})]})}),Object(me.jsx)(ke.a,{item:!0,xs:1}),Object(me.jsx)(ke.a,{item:!0,xs:3,children:Object(me.jsxs)(Bt.a,{children:[Object(me.jsx)(Mt.a,{title:"Leave Type Code"}),Object(me.jsx)(Ft.a,{children:Object(me.jsx)(K.a,{children:c.leave_type_code})})]})}),Object(me.jsx)(ke.a,{item:!0,xs:1}),Object(me.jsx)(ke.a,{item:!0,xs:3,children:Object(me.jsxs)(Bt.a,{children:[Object(me.jsx)(Mt.a,{title:"Leave Type Limit"}),Object(me.jsx)(Ft.a,{children:Object(me.jsx)(K.a,{children:c.limit})})]})}),Object(me.jsx)(ke.a,{item:!0,xs:3}),Object(me.jsx)(ke.a,{item:!0,xs:6,marginTop:5,children:Object(me.jsx)("div",{children:Object(me.jsx)(Tt.b,{data:{labels:Object.keys(r),datasets:[{label:"# of Leaves Accepted/Rejected",data:Object.values(r),backgroundColor:Object.keys(r).map((function(e){return e.toRGB()}))}]}})})}),Object(me.jsx)(ke.a,{item:!0,xs:3})]})}):Object(me.jsx)(me.Fragment,{})})},Ht=a(432),qt=a(290),Vt=Object(O.a)((function(e){return{filterBarContainer:{display:"flex",flexDirection:"row",width:"100%",gap:20,paddingTop:10,paddingBottom:10}}}));var Xt,Qt=function(){var e=Vt(),t=Object(n.useState)([]),a=Object(d.a)(t,2),r=(a[0],a[1]),i=Object(n.useState)([]),s=Object(d.a)(i,2),o=(s[0],s[1]),l=Object(n.useState)(!1),b=Object(d.a)(l,2),O=b[0],x=b[1],p=Object(n.useState)(null),u=Object(d.a)(p,2),m=u[0],g=u[1],f=Object(n.useState)([]),v=Object(d.a)(f,2),y=v[0],_=v[1],S=Object(n.useState)(null),w=Object(d.a)(S,2),C=w[0],k=w[1],L=Object(n.useState)(!1),T=Object(d.a)(L,2),W=T[0],A=T[1],N=Object(n.useState)(null),E=Object(d.a)(N,2),D=E[0],R=E[1],P=Object(n.useState)(null),B=Object(d.a)(P,2),M=B[0],F=B[1],U=Object(n.useState)(null),J=Object(d.a)(U,2),G=J[0],z=J[1],H=Object(n.useState)(null),q=Object(d.a)(H,2),V=q[0],X=q[1],Q=Object(n.useState)(null),Y=Object(d.a)(Q,2),ee=Y[0],te=Y[1],ae=Object(n.useState)(null),ne=Object(d.a)(ae,2),ce=ne[0],re=(ne[1],Object(n.useState)([])),ie=Object(d.a)(re,2),se=ie[0],oe=ie[1],le=Object(n.useState)(!1),je=Object(d.a)(le,2),de=je[0],be=je[1],he=Object(n.useState)(null),Oe=Object(d.a)(he,2),xe=Oe[0],pe=Oe[1],ue=Object(n.useState)([]),ge=Object(d.a)(ue,2),fe=ge[0],ve=ge[1],ye=Object(n.useState)(""),_e=Object(d.a)(ye,2),Se=_e[0],we=_e[1],Ce=Object(n.useState)(),Te=Object(d.a)(Ce,2),We=Te[0],Ae=(Te[1],Object(n.useState)()),Ne=Object(d.a)(Ae,2),De=Ne[0],Ie=(Ne[1],Object(n.useState)("")),Re=Object(d.a)(Ie,2),Pe=Re[0],Be=Re[1],Me=c.a.useState([null,null]),Fe=Object(d.a)(Me,2),Ue=Fe[0],Je=Fe[1];Object(n.useEffect)((function(){Ge(),qe()}),[]);var Ge=function(){return fetch("http://127.0.0.1:8000/dept/add-dept").then((function(e){return e.json()})).then((function(e){o(Object(j.a)(e))}))},qe=function(){fetch("http://127.0.0.1:8000/leave-types/add-leave-type").then((function(e){return e.json()})).then((function(e){r(Object(j.a)(e))}))},Ve=function(){g(!1)},Xe=function(){R(!1)},Qe=function(){pe(!1)};return Object(me.jsx)("div",{children:Object(me.jsxs)(ke.a,{container:!0,spacing:0,children:[Object(me.jsx)(ke.a,{item:!0,xs:6,marginBottom:2,children:Object(me.jsx)(K.a,{variant:"h4",children:"Report Generation"})}),Object(me.jsx)(ke.a,{item:!0,xs:6,marginBottom:2,children:Object(me.jsx)($.a,{display:"flex",justifyContent:"flex-end",children:Object(me.jsx)(Z.a,{variant:"contained",disabled:!O,onClick:function(){var e=[];for(var t in y)e.push(y[t].id);var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leaveIds:e}),responseType:"blob"};fetch("http://127.0.0.1:8000/leaves/generate-report",a).then((function(e){return e.blob()})).then((function(e){qt(e,"report.xlsx")})).catch((function(e){console.log(e)}))},children:"Export Report"})})}),Object(me.jsx)(ke.a,{item:!0,xs:12,children:Object(me.jsx)(At.a,{position:"static",color:"transparent",children:Object(me.jsxs)(Nt.a,{children:[Object(me.jsxs)("div",{className:e.filterBarContainer,children:[Object(me.jsxs)(Ee.a,{style:{marginRight:100},children:[Object(me.jsx)(Et.a,{id:"filter-by-button",children:"Filter by"}),Object(me.jsx)(Dt.a,{"aria-labelledby":"filter-by-button",name:"filter-by-button-group",value:Pe,row:!0,onChange:function(e){Be(e.target.value)},children:Object(me.jsx)(It.a,{value:"employee_id",control:Object(me.jsx)(Rt.a,{}),label:"Employee ID"})})]}),Object(me.jsx)(He.b,{dateAdapter:ze.a,children:Object(me.jsx)(Ht.a,{startText:"Leaves From",endText:"Leaves Till",value:Ue,onChange:function(e){Je(e)},renderInput:function(e,t){return Object(me.jsxs)(c.a.Fragment,{children:[Object(me.jsx)(Le.a,Object(h.a)({},e)),Object(me.jsx)($.a,{sx:{mx:2},children:" to "}),Object(me.jsx)(Le.a,Object(h.a)({},t))]})}})}),Object(me.jsx)(Le.a,{variant:"outlined",label:"Employee ID",style:{width:500},value:Se,onChange:function(e){we(e.target.value)},children:"Emoloyee ID"})]}),Object(me.jsx)("div",{children:Object(me.jsx)(I.a,{type:"submit",style:{marginLeft:15},onClick:function(e){"employee_id"===Pe?(x(!0),g(!0),console.log("EMPLOYEE ID"),fetch("http://127.0.0.1:8000/leaves/filter-leaves-empid/".concat(Se,"/")).then((function(e){return e.json()})).then((function(e){if(null==Ue[0]&&null==Ue[1])_(e);else{var t=Ue[0].toISOString().slice(0,10),a=Ue[1].toISOString().slice(0,10);_(e.filter((function(e){return e.manager_approved})).filter((function(e){return new Date(e.from_date)<new Date(t)&&new Date(e.to_date)>new Date(t)||new Date(e.from_date)>new Date(t)&&new Date(e.to_date)<new Date(a)||new Date(e.from_date)<new Date(a)&&new Date(e.to_date)>new Date(a)})))}fetch("http://127.0.0.1:8000/accounts/get-user-by-id/".concat(Se,"/")).then((function(e){return e.json()})).then((function(e){k(e),Ve()}))}))):"department"===Pe?(A(!0),R(!0),console.log("DEPARTMENT",We),fetch("http://127.0.0.1:8000/leaves/filter-leaves-dept/".concat(We,"/")).then((function(e){return e.json()})).then((function(e){oe(e),fetch("http://127.0.0.1:8000/dept/get-dept/".concat(We)).then((function(e){return e.json()})).then((function(e){F(e),fetch("http://127.0.0.1:8000/leaves/pie-chart-data/").then((function(e){return e.json()})).then((function(e){X(e),Xe()}))}))}))):"leave_type"===Pe&&(be(!0),pe(!0),fetch("http://127.0.0.1:8000/leaves/filter-leaves-leaveType/".concat(De,"/")).then((function(e){return e.json()})).then((function(e){ve(e),fetch("http://127.0.0.1:8000/leave-types/pie-chart-data/").then((function(e){return e.json()})).then((function(e){te(e),fetch("http://127.0.0.1:8000/leave-types/get-by-name/".concat(De)).then((function(e){return e.json()})).then((function(e){z(e),Qe()}))}))})))},children:Object(me.jsx)(Pt.a,{})})})]})})}),Object(me.jsx)(ke.a,{item:!0,xs:12,children:"employee_id"===Pe?Object(me.jsx)(Jt,{loaded:O,loading:m,handleLoadingDone:Ve,leaves:y,employee:C}):"department"===Pe?Object(me.jsx)(Gt,{loaded:W,loading:D,handleLoadingDone:Xe,leaves:se,dept:M,pieChartData:V,numEmp:ce}):Object(me.jsx)(zt,{loaded:de,loading:xe,handleLoadingDone:Qe,leaves:fe,pieChartData:ee,leaveType:G})})]})})},Kt=Object(O.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(h.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(b.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{marginTop:"120px"},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},menuStyle:{marginTop:"40px"}}})),Yt=function(e){var t=e.w,a=e.h,n=e.mt,c=e.ml;return Object(me.jsx)("div",{style:{backgroundColor:"lightgrey",width:t,height:a,borderRadius:"3px",marginLeft:c,marginTop:n}})};var Zt=function(e){jt("ELMS    |   Admin");var t=Object(p.f)(),a=st(),r=it().user,i=Kt(),s=Object(n.useState)(!0),o=Object(d.a)(s,2),l=o[0],b=o[1],O=Object(n.useState)(!1),z=Object(d.a)(O,2),V=z[0],K=z[1],ee=Object(n.useState)(1),te=Object(d.a)(ee,2),ae=te[0],ne=(te[1],Object(n.useState)(!1)),ce=Object(d.a)(ne,2),re=ce[0],ie=ce[1],se=Object(n.useState)(!1),oe=Object(d.a)(se,2),le=(oe[0],oe[1]),je=c.a.useState(null),de=Object(d.a)(je,2),be=de[0],he=de[1],Oe=c.a.useState(!1),xe=Object(d.a)(Oe,2),pe=xe[0],ue=xe[1],ge=Object(n.useState)(null),fe=Object(d.a)(ge,2),ve=fe[0],ye=fe[1],we=Object(n.useState)(null),ke=Object(d.a)(we,2),We=ke[0],Re=ke[1],Pe=Object(n.useState)(null),Be=Object(d.a)(Pe,2),Me=Be[0],Fe=Be[1],Ue=c.a.useState(null),Je=Object(d.a)(Ue,2),Qe=Je[0],Ke=Je[1],Ye=Object(n.useState)(null),$e=Object(d.a)(Ye,2),et=$e[0],tt=$e[1],at=Object(n.useState)(""),nt=Object(d.a)(at,2),ct=nt[0],rt=nt[1],ot=Object(n.useState)(""),dt=Object(d.a)(ot,2),bt=dt[0],ht=dt[1],Ot=Object(n.useState)(""),xt=Object(d.a)(Ot,2),pt=xt[0],mt=xt[1],gt=Object(n.useState)(""),ft=Object(d.a)(gt,2),vt=ft[0],_t=ft[1],St=Object(n.useState)(""),wt=Object(d.a)(St,2),Ct=wt[0],Lt=wt[1],Tt=Object(n.useState)(""),Wt=Object(d.a)(Tt,2),At=Wt[0],Nt=Wt[1],Et=Object(n.useState)(""),Dt=Object(d.a)(Et,2),It=Dt[0],Rt=Dt[1],Pt=Object(n.useState)(""),Bt=Object(d.a)(Pt,2),Mt=(Bt[0],Bt[1]),Ft=Object(n.useState)(""),Ut=Object(d.a)(Ft,2),Jt=Ut[0],Gt=Ut[1],zt=Object(n.useState)([]),Ht=Object(d.a)(zt,2),qt=Ht[0],Vt=Ht[1],Zt=Object(n.useState)([]),$t=Object(d.a)(Zt,2),ea=$t[0],ta=$t[1],aa=Object(n.useState)(null),na=Object(d.a)(aa,2),ca=na[0],ra=na[1];Object(n.useEffect)((function(){da(),oa(),ja(),ia(),sa(),(Xt=new WebSocket("ws://127.0.0.1:8000/ws/update-user")).onmessage=function(e){var t=JSON.parse(e.data);"UPDATE"===t.action?t.admin&&ia():"LOGOUT"===t.action&&Ze(a,{username:r.username,webSocket:Xt})},Xt.onclose=function(e){console.error("Chat socket closed unexpectedly")}}),[]);var ia=function(){fetch("http://127.0.0.1:8000/leaves/get-admin-leaves/".concat(r.username,"/")).then((function(e){return e.json()})).then((function(e){Vt(Object(j.a)(e))}))},sa=function(){fetch("http://127.0.0.1:8000/leaves/get-all-leaves/").then((function(e){return e.json()})).then((function(e){ta(Object(j.a)(e))}))},oa=function(){fetch("http://127.0.0.1:8000/dept/number-dept").then((function(e){return e.json()})).then((function(e){Re(e.length)}))},la=function(e){"manager_first_name"===e.target.id?rt(e.target.value):"manager_last_name"===e.target.id?ht(e.target.value):"manager_username"===e.target.id?mt(e.target.value):"manager_id"===e.target.id?_t(e.target.value):"manager_department_code"===e.target.id?Lt(e.target.value):"manager_number"===e.target.id?Nt(e.target.value):"manager_flat"===e.target.id?Rt(e.target.value):"manager_area"===e.target.id?Mt(e.target.value):"manager_town"===e.target.id?Gt(e.target.value):tt(e.target.value)},ja=function(){fetch("http://127.0.0.1:8000/leave-types/number-leave-types").then((function(e){return e.json()})).then((function(e){Fe(e.length)}))},da=function(){fetch("http://127.0.0.1:8000/accounts/number-employees/").then((function(e){return e.json()})).then((function(e){ye(e.length)}))},ba=function(){K(!1)},ha=Object(me.jsxs)(m.a,{className:i.menuStyle,elevation:0,anchorEl:be,anchorOrigin:{vertical:"bottom",horizontal:"right"},id:"primary-profile-account-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"center"},open:pe,onClose:function(){ue(!1)},children:[Object(me.jsxs)(g.a,{onClick:function(){ue(!1),t.push("/admin/settings")},children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(P.a,{})}),Object(me.jsx)(v.a,{children:"Settings"})]}),Object(me.jsxs)(g.a,{onClick:function(){Ze(a,{username:r.username,webSocket:Xt})},children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(B.a,{})}),Object(me.jsx)(v.a,{children:"Logout"})]})]});return Object(me.jsxs)("div",{className:i.root,children:[Object(me.jsx)(y.a,{}),Object(me.jsx)(_.a,{position:"absolute",className:Object(q.a)(i.appBar,l&&i.appBarShift),children:Object(me.jsxs)(S.a,{className:i.toolbar,children:[Object(me.jsx)(I.a,{edge:"start",color:"inherit","aria-label":"open drawer",className:Object(q.a)(i.menuButton,l&&i.menuButtonHidden),onClick:function(){b(!0)},children:Object(me.jsx)(H.a,{})}),Object(me.jsx)(w.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:i.title,children:"LMS Dashboard (Admin)"}),Object(me.jsx)(I.a,{color:"inherit",onClick:function(e){e.preventDefault(),le(e.currentTarget),ie(!0)},sx:{marginRight:5},children:0===ae?Object(me.jsx)(M.a,{}):Object(me.jsx)(R.a,{badgeContent:ae,color:"primary",children:Object(me.jsx)(M.a,{})})}),Object(me.jsx)(lt,{open:re,handleNotificationsMenuClose:function(){ie(!1)}}),Object(me.jsx)(I.a,{edge:"end","aria-label":"account of current user","aria-controls":"primary-profile-account-menu","aria-haspopup":"true",color:"inherit",onClick:function(e){he(e.currentTarget),ue(!0)},children:Object(me.jsx)(C.a,{style:{height:"35px",width:"35px"},children:r.first_name.charAt(0)+r.last_name.charAt(0)})}),ha]})}),Object(me.jsxs)(k.a,{variant:"permanent",classes:{paper:Object(q.a)(i.drawerPaper,!l&&i.drawerPaperClose)},open:l,children:[Object(me.jsx)("div",{className:i.toolbarIcon,children:Object(me.jsx)(I.a,{onClick:function(){b(!1)},children:Object(me.jsx)(F.a,{})})}),Object(me.jsx)(L.a,{}),Object(me.jsxs)(T.a,{children:[Object(me.jsxs)(W.a,{button:!0,onClick:function(){t.push("/admin")},children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(U.a,{})}),Object(me.jsx)(v.a,{primary:"Dashboard"})]}),Object(me.jsxs)(W.a,{button:!0,onClick:function(e){t.push("/admin/mng-emp")},children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(J.a,{})}),Object(me.jsx)(v.a,{primary:"Manage Employees"})]}),Object(me.jsxs)(W.a,{button:!0,onClick:function(){t.push("/admin/mng-dpt")},children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(G.a,{})}),Object(me.jsx)(v.a,{primary:"Manage Department"})]}),Object(me.jsxs)(W.a,{button:!0,onClick:function(e){t.push("/admin/mng-leave-type")},children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(x.a,{icon:u.a})}),Object(me.jsx)(v.a,{primary:"Manage Leave Type"})]}),Object(me.jsxs)(W.a,{button:!0,onClick:function(){t.push("/admin/leave-calendar")},children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(U.a,{})}),Object(me.jsx)(v.a,{primary:"View Leave Calendar"})]}),Object(me.jsxs)(W.a,{button:!0,onClick:function(){t.push("/admin/report-generation")},children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(U.a,{})}),Object(me.jsx)(v.a,{primary:"Report Generation"})]})]}),Object(me.jsx)(L.a,{}),Object(me.jsxs)(W.a,{button:!0,onClick:function(){K(!0)},children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(J.a,{})}),Object(me.jsx)(v.a,{primary:"Add Manager"})]}),Object(me.jsx)(X.a,{open:V,onClose:ba,children:Object(me.jsxs)($.a,{sx:{width:600,paddingBottom:2,paddingLeft:1,paddingRight:1},children:[Object(me.jsx)(Q.a,{children:"Add Manager"}),Object(me.jsx)(Te.a,{children:Object(me.jsx)("form",{children:Object(me.jsxs)(Se.a,{spacing:3,children:[Object(me.jsxs)("div",{style:{display:"flex"},children:[Object(me.jsx)(Le.a,{id:"manager_first_name",type:"text",variant:"standard",label:"First Name",style:{marginRight:15},value:ct,onChange:la}),Object(me.jsx)(Le.a,{id:"manager_last_name",type:"text",variant:"standard",label:"Last Name",value:bt,onChange:la})]}),Object(me.jsx)(Le.a,{id:"manager_username",type:"text",fullWidth:!0,variant:"standard",label:"Manager Username",value:pt,onChange:la}),Object(me.jsx)(Le.a,{id:"manager_id",type:"text",fullWidth:!0,variant:"standard",label:"Manager ID",value:vt,onChange:la}),Object(me.jsx)(Le.a,{id:"manager_department_code",type:"text",fullWidth:!0,variant:"standard",label:"Manager Department",value:Ct,onChange:la}),Object(me.jsx)(He.b,{dateAdapter:ze.a,children:Object(me.jsx)(qe.a,{label:"Date of Birth",value:Qe,onChange:function(e){Ke(e)},renderInput:function(e){return Object(me.jsx)(Le.a,Object(h.a)({},e))}})}),Object(me.jsx)(He.b,{dateAdapter:ze.a,children:Object(me.jsx)(qe.a,{label:"Joining Date",value:ca,onChange:function(e){ra(e)},renderInput:function(e){return Object(me.jsx)(Le.a,Object(h.a)({},e))}})}),Object(me.jsx)(Le.a,{id:"manager_number",type:"tel",fullWidth:!0,variant:"standard",label:"Manager Phone Number",value:At,onChange:la}),Object(me.jsx)(L.a,{}),Object(me.jsx)(w.a,{children:"Address"}),Object(me.jsx)(Le.a,{id:"manager_flat",type:"text",fullWidth:!0,variant:"standard",label:"Flat, House no., Building, Company, Apartment",value:It,onChange:la}),Object(me.jsx)(Le.a,{id:"manager_town",type:"text",fullWidth:!0,variant:"standard",label:"Town/City",value:Jt,onChange:la}),Object(me.jsxs)(Ee.a,{sx:{m:1,minWidth:120},children:[Object(me.jsx)(De.a,{id:"state-helper-label",children:"State"}),Object(me.jsx)(Ie.a,{labelId:"state-helper-label",id:"state-helper",value:et,label:"State",onChange:la,children:Object(Ve.getStates)("in").map((function(e,t){return Object(me.jsx)(g.a,{value:e,children:e})}))})]})]})})}),Object(me.jsxs)(Y.a,{children:[Object(me.jsx)(Z.a,{color:"primary",onClick:function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:pt,first_name:ct,last_name:bt,employee_id:vt,dob:Qe.toISOString().slice(0,10),department_code:Ct,phone_number:At,joining_date:ca.toISOString().slice(0,10),flat:It,town:Jt,state:et})};fetch("http://127.0.0.1:8000/accounts/register/manager",e).then((function(e){return e.json()})).then((function(e){})),K(!1),Ke(null),mt(""),rt(""),ht(""),_t(""),Lt(""),Nt(""),Rt(""),Mt(""),Gt(""),ra(null)},children:"Add"}),Object(me.jsx)(Z.a,{color:"error",onClick:ba,children:"Cancel"})]})]})})]}),Object(me.jsx)("main",{className:i.content,children:Object(me.jsx)("div",{className:i.appBarSpacer,children:Object(me.jsxs)(A.a,{maxWidth:"lg",className:i.container,children:[Object(me.jsx)(kt,{path:"/admin",exact:!0,children:Object(me.jsxs)(N.a,{container:!0,spacing:3,justifyContent:"space-around",children:[Object(me.jsx)(N.a,{item:!0,xs:12,md:4,lg:3,children:Object(me.jsx)(E.a,{style:{textAlign:"center"},children:Object(me.jsxs)(D.a,{children:[Object(me.jsx)(w.a,{style:{fontSize:16},color:"textSecondary",children:"Number of Employees"}),Object(me.jsx)(w.a,{variant:"h5",component:"div",children:null!==ve?ve:Object(me.jsx)(Yt,{w:"30px",h:"30px",ml:"110px",mt:"3.2px"})})]})})}),Object(me.jsx)(N.a,{item:!0,xs:12,md:4,lg:3,children:Object(me.jsx)(E.a,{style:{textAlign:"center"},children:Object(me.jsxs)(D.a,{children:[Object(me.jsx)(w.a,{style:{fontSize:16},color:"textSecondary",children:"Number of Departments"}),Object(me.jsx)(w.a,{variant:"h5",component:"div",children:null!==We?We:Object(me.jsx)(Yt,{w:"30px",h:"30px",ml:"110px",mt:"3.2px"})})]})})}),Object(me.jsx)(N.a,{item:!0,xs:12,md:4,lg:4,children:Object(me.jsx)(E.a,{style:{textAlign:"center"},children:Object(me.jsxs)(D.a,{children:[Object(me.jsx)(w.a,{style:{fontSize:16},color:"textSecondary",children:"Number of Leave Types"}),Object(me.jsx)(w.a,{variant:"h5",component:"div",children:null!==Me?Me:Object(me.jsx)(Yt,{w:"30px",h:"30px",ml:"160px"})})]})})}),Object(me.jsx)(N.a,{item:!0,xs:12,md:4,lg:12,children:Object(me.jsx)(_e,{role:"admin",leaves:qt,webSocket:Xt,fetchLeaves:ia})})]})}),Object(me.jsx)(kt,{path:"/admin/profile",exact:!0,children:Object(me.jsx)(Ce,{})}),Object(me.jsx)(kt,{path:"/admin/mng-dpt",exact:!0,children:Object(me.jsx)(Ae,{fetchNumOfDepts:oa})}),Object(me.jsx)(kt,{path:"/admin/mng-leave-type",exact:!0,children:Object(me.jsx)(Ge,{fetchNumOfLeaveTypes:ja})}),Object(me.jsx)(kt,{path:"/admin/mng-emp",exact:!0,children:Object(me.jsx)(Xe,{fetchNumOfEmployees:da,fetchLeaves:ia})}),Object(me.jsx)(kt,{path:"/admin/settings",exact:!0,children:Object(me.jsx)(Ne,{role:"admin"})}),Object(me.jsx)(p.b,{path:"/admin/change-password",exact:!0,children:Object(me.jsx)(ut,{})}),Object(me.jsx)(p.b,{path:"/admin/leave-calendar",exact:!0,children:Object(me.jsx)(yt,{leaves:ea})}),Object(me.jsx)(p.b,{path:"/admin/report-generation",exact:!0,children:Object(me.jsx)(Qt,{})})]})})})]})},$t=a(226),ea=a.n($t);var ta,aa=function(e){var t=e.leaves,a=e.fetchLeaves,r=e.webSocket,i=st(),s=it().user;Object(n.useEffect)((function(){}),[t]);var o=c.a.useState(0),l=Object(d.a)(o,2),j=l[0],b=l[1],h=c.a.useState(5),O=Object(d.a)(h,2),x=O[0],p=O[1],u=Object(n.useState)(!1),m=Object(d.a)(u,2),g=m[0],f=m[1],v=Object(n.useState)(null),y=Object(d.a)(v,2),_=y[0],S=y[1],w=function(){var e={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s.username,leave_id:_})};fetch("http://127.0.0.1:8000/leaves/delete-leave/",e).then((function(e){return e.json()})).then((function(e){r.send(JSON.stringify({action:"UPDATE",admin:!0,employee:!1,manager:!1})),et(i,{username:s.username}),a(),f(!1)}))};return Object(me.jsx)(ae.a,{component:ne.a,sx:{marginTop:5},children:Object(me.jsxs)(ce.a,{style:{minWidth:"500px"},children:[Object(me.jsx)(re.a,{children:Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"S. No."}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},align:"left",children:"Leave ID"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Leave Type"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Applied On"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"From"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"To"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Admin"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Manager"}),Object(me.jsx)(se.a,{style:{fontWeight:"bolder"},children:"Cancel"})]})}),Object(me.jsx)(oe.a,{children:(x>0?t.slice(j*x,j*x+x):t).map((function(e,t){return Object(me.jsxs)(ie.a,{children:[Object(me.jsx)(se.a,{children:t+1}),Object(me.jsx)(se.a,{children:e.id}),Object(me.jsx)(se.a,{children:e.leave_type}),Object(me.jsx)(se.a,{children:e.applied_on.substr(0,10)}),Object(me.jsx)(se.a,{children:e.from_date}),Object(me.jsx)(se.a,{children:e.to_date}),Object(me.jsx)(se.a,{style:{paddingLeft:"25px"},children:e.waiting_approval?Object(me.jsx)(he.a,{color:"warning"}):e.admin_approved?Object(me.jsx)(Oe.a,{color:"success"}):Object(me.jsx)(xe.a,{color:"error"})}),Object(me.jsx)(se.a,{style:{paddingLeft:"32px"},children:e.waiting_approval?Object(me.jsx)(he.a,{color:"warning"}):e.admin_approved?e.manager_rejected?Object(me.jsx)(xe.a,{color:"error"}):e.manager_approved?Object(me.jsx)(Oe.a,{color:"success"}):Object(me.jsx)(he.a,{color:"warning"}):Object(me.jsx)(xe.a,{color:"error"})}),Object(me.jsxs)(se.a,{children:[Object(me.jsx)(I.a,{color:"error",onClick:function(){S(e.id),f(!0)},disabled:!e.waiting_approval,children:Object(me.jsx)(ea.a,{})}),Object(me.jsxs)(X.a,{open:g,onClose:function(){f(!1)},children:[Object(me.jsx)(I.a,{disableRipple:!0,onClick:function(){f(!1)},children:Object(me.jsx)(xe.a,{fontSize:"small",sx:{marginLeft:43.9}})}),Object(me.jsx)(Q.a,{children:Object(me.jsx)(K.a,{children:"Do you want to cancel the Leave Application?"})}),Object(me.jsx)(Y.a,{children:Object(me.jsx)(Z.a,{color:"error",onClick:w,children:"Cancel"})})]})]})]},e.id)}))}),Object(me.jsx)(je.a,{children:Object(me.jsx)(ie.a,{children:Object(me.jsx)(de.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],count:t.length,rowsPerPage:x,page:j,onRowsPerPageChange:function(e){p(parseInt(e.target.value,10)),b(0)},onPageChange:function(e,t){b(t)}})})})]})})},na=Object(O.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(h.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(b.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{marginTop:"120px"},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},menuStyle:{marginTop:"40px"}}}));var ca=function(e){jt("ELMS   |   Employee");var t=Object(p.f)(),a=st(),r=it().user,i=na(),s=Object(n.useState)(!0),b=Object(d.a)(s,2),O=b[0],x=b[1],u=Object(n.useState)(!1),J=Object(d.a)(u,2),G=J[0],z=J[1],V=Object(n.useState)(!1),K=Object(d.a)(V,2),ee=K[0],te=K[1],ae=Object(n.useState)(!1),ne=Object(d.a)(ae,2),ce=ne[0],re=ne[1],ie=Object(n.useState)(!1),se=Object(d.a)(ie,2),oe=se[0],le=se[1],je=Object(n.useState)(3),de=Object(d.a)(je,2),be=de[0],he=(de[1],c.a.useState(null)),Oe=Object(d.a)(he,2),xe=Oe[0],pe=Oe[1],ue=c.a.useState(!1),ge=Object(d.a)(ue,2),fe=ge[0],ve=ge[1],ye=Object(n.useState)(!1),_e=Object(d.a)(ye,2),we=_e[0],ke=_e[1],We=Object(n.useState)(!1),Ae=Object(d.a)(We,2),Re=(Ae[0],Ae[1]),Pe=Object(n.useState)(""),Be=Object(d.a)(Pe,2),Me=Be[0],Fe=Be[1],Ue=Object(n.useState)(""),Je=Object(d.a)(Ue,2),Ge=Je[0],Xe=Je[1],Qe=Object(n.useState)(""),Ke=Object(d.a)(Qe,2),Ye=Ke[0],$e=Ke[1],tt=Object(n.useState)([]),at=Object(d.a)(tt,2),nt=at[0],ct=at[1],rt=Object(n.useState)(null),ot=Object(d.a)(rt,2),dt=ot[0],bt=ot[1],ht=Object(n.useState)(null),Ot=Object(d.a)(ht,2),xt=Ot[0],pt=Ot[1],mt=Object(n.useState)(""),gt=Object(d.a)(mt,2),ft=gt[0],vt=gt[1],_t=Object(n.useState)(""),St=Object(d.a)(_t,2),wt=St[0],Ct=St[1],kt=Object(n.useState)(""),Lt=Object(d.a)(kt,2),Tt=Lt[0],Wt=Lt[1],At=Object(n.useState)([]),Nt=Object(d.a)(At,2),Et=Nt[0],Dt=Nt[1];Object(n.useEffect)((function(){Pt(),Rt(),It(),ta=new WebSocket("ws://127.0.0.1:8000/ws/update-user"),new WebSocket("ws://127.0.0.1:8000/ws/delete-user"),ta.onmessage=function(e){var t=JSON.parse(e.data);"UPDATE"===t.action?t.employee&&It():"LOGOUT"===t.action&&Ze(a,{username:r.username,webSocket:ta})},ta.onclose=function(e){console.error("Chat socket closed unexpectedly")}}),[]);var It=function(){fetch("http://127.0.0.1:8000/leaves/get-leaves/".concat(r.username,"/")).then((function(e){return e.json()})).then((function(e){Dt(Object(j.a)(e))}))},Rt=function(){fetch("http://127.0.0.1:8000/leave-types/get-leave-type-".concat(r.contract_based?"contract":"regular")).then((function(e){return e.json()})).then((function(e){ct(Object(j.a)(e))}))},Pt=function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r.username})};fetch("http://127.0.0.1:8000/accounts/get-names/",e).then((function(e){return e.json()})).then((function(e){Fe(e.admin),Xe(e.manager)}))},Bt=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(a,{username:r.username,webSocket:ta});case 2:ta.send(JSON.stringify({action:"UPDATE",admin:!0,manager:!0,employee:!1})),t.push("/login");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Mt=function(e){"town"===e.target.id?Ct(e.target.value):Wt(e.target.value)},Ft=Object(me.jsxs)(m.a,{className:i.menuStyle,elevation:0,anchorEl:xe,anchorOrigin:{vertical:"bottom",horizontal:"right"},id:"primary-profile-account-menu",transformOrigin:{vertical:"top",horizontal:"center"},open:fe,onClose:function(){ve(!1)},children:[Object(me.jsxs)(g.a,{onClick:function(){ve(!1),t.push("/employee/settings")},children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(P.a,{})}),Object(me.jsx)(v.a,{children:"Settings"})]}),Object(me.jsxs)(g.a,{onClick:Bt,children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(B.a,{})}),Object(me.jsx)(v.a,{children:"Logout"})]})]});return Object(me.jsxs)("div",{className:i.root,children:[Object(me.jsx)(y.a,{}),Object(me.jsx)(_.a,{position:"absolute",className:Object(q.a)(i.appBar,O&&i.appBarShift),children:Object(me.jsxs)(S.a,{className:i.toolbar,children:[Object(me.jsx)(I.a,{edge:"start",color:"inherit","aria-label":"open drawer",className:Object(q.a)(i.menuButton,O&&i.menuButtonHidden),onClick:function(){x(!0)},children:Object(me.jsx)(H.a,{})}),Object(me.jsx)(w.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:i.title,children:"LMS Dashboard (Employee)"}),Object(me.jsx)(I.a,{color:"inherit",onClick:function(e){e.preventDefault(),Re(e.currentTarget),ke(!0)},"aria-label":"notifications of current user","aria-controls":"primary-profile-notifications-menu","aria-haspopup":"true",sx:{marginRight:5},children:0===be?Object(me.jsx)(M.a,{}):Object(me.jsx)(R.a,{badgeContent:be,color:"primary",children:Object(me.jsx)(M.a,{})})}),Object(me.jsx)(lt,{open:we,handleNotificationsMenuClose:function(){ke(!1)}}),Object(me.jsx)(I.a,{edge:"end","aria-label":"account of current user","aria-controls":"primary-profile-account-menu","aria-haspopup":"true",color:"inherit",onClick:function(e){pe(e.currentTarget),ve(!0)},children:Object(me.jsx)(C.a,{style:{height:"35px",width:"35px"},children:r.first_name.charAt(0)+r.last_name.charAt(0)})}),Ft]})}),Object(me.jsxs)(k.a,{variant:"permanent",classes:{paper:Object(q.a)(i.drawerPaper,!O&&i.drawerPaperClose)},open:O,children:[Object(me.jsx)("div",{className:i.toolbarIcon,children:Object(me.jsx)(I.a,{onClick:function(){x(!1)},children:Object(me.jsx)(F.a,{})})}),Object(me.jsx)(L.a,{}),Object(me.jsxs)(T.a,{children:[Object(me.jsxs)(W.a,{button:!0,onClick:function(){t.push("/employee/")},children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(U.a,{})}),Object(me.jsx)(v.a,{primary:"Dashboard"})]}),Object(me.jsxs)(W.a,{button:!0,onClick:function(){z(!0)},children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(U.a,{})}),Object(me.jsx)(v.a,{primary:"Apply Leave"})]}),Object(me.jsx)(X.a,{open:G,onClose:function(){z(!1),te(!1),re(!1),le(!1)},children:Object(me.jsxs)($.a,{sx:{width:600,paddingBottom:2,paddingLeft:1,paddingRight:1},children:[Object(me.jsx)(Q.a,{children:"Leave Application"}),Object(me.jsx)(Te.a,{children:Object(me.jsx)("form",{children:Object(me.jsxs)(Se.a,{spacing:3,children:[Object(me.jsx)(Le.a,{value:r.first_name+" "+r.last_name,label:"Username",disabled:!0,style:{marginRight:15},fullWidth:!0}),Object(me.jsxs)("div",{style:{display:"flex"},children:[Object(me.jsx)(Le.a,{value:Me,label:"Assigned Admin",style:{marginRight:15},disabled:!0,fullWidth:!0}),Object(me.jsx)(Le.a,{value:Ge,label:"Assigned Manager",disabled:!0,fullWidth:!0})]}),Object(me.jsxs)(Ee.a,{fullWidth:!0,required:!0,children:[Object(me.jsx)(De.a,{id:"leave-type-label",children:"Leave Type"}),Object(me.jsx)(Ie.a,{labelId:"leave-type-label",id:"leave-type",value:Ye,label:"Leave Type",margin:"normal",required:!0,onChange:function(e){$e(e.target.value)},children:nt.map((function(e){return Object(me.jsx)(g.a,{value:e.leave_type_name,children:e.leave_type_name})}))})]}),Object(me.jsxs)("div",{style:{display:"flex"},children:[Object(me.jsx)(He.b,{dateAdapter:ze.a,children:Object(me.jsx)(qe.a,{label:"From",value:dt,onChange:function(e){bt(e)},renderInput:function(e){return Object(me.jsx)(Le.a,Object(h.a)({},e))},style:{marginRight:15}})}),Object(me.jsx)(He.b,{dateAdapter:ze.a,children:Object(me.jsx)(qe.a,{label:"To",value:xt,onChange:function(e){pt(e)},renderInput:function(e){return Object(me.jsx)(Le.a,Object(h.a)({},e))}})})]}),Object(me.jsx)(Le.a,{multiline:!0,rows:3,name:"purpose",label:"Purpose for Leave",onChange:function(e){vt(e.target.value)},value:ft}),Object(me.jsx)(L.a,{}),Object(me.jsx)(w.a,{children:"Address during Leave"}),Object(me.jsx)(Le.a,{id:"town",type:"text",fullWidth:!0,variant:"standard",label:"Town/City",value:wt,onChange:Mt}),Object(me.jsxs)(Ee.a,{sx:{m:1,minWidth:120},children:[Object(me.jsx)(De.a,{id:"state-helper-label",children:"State"}),Object(me.jsx)(Ie.a,{labelId:"state-helper-label",id:"state-helper",value:Tt,label:"State",onChange:Mt,children:Object(Ve.getStates)("in").map((function(e,t){return Object(me.jsx)(g.a,{value:e,children:e})}))})]})]})})}),Object(me.jsxs)(Y.a,{children:[Object(me.jsx)(Z.a,{color:"primary",onClick:function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r.username,leave_type:Ye,admin:r.admin,manager:r.manager,from_date:dt,to_date:xt,purpose:ft,address_during_leave:wt+" "+Tt})};fetch("http://127.0.0.1:8000/leaves/apply-leave/",e).then((function(e){return e.json()})).then((function(e){et(a,{username:r.username}),It(),z(!1),ta.send(JSON.stringify({admin:!0,manager:!1,employee:!1,action:"UPDATE"}))}))},children:"Apply Leave"}),Object(me.jsx)(Z.a,{color:"error",onClick:function(){z(!1),$e(""),bt(null),pt(null),vt(""),Ct(""),Wt("")},children:"Cancel"})]})]})}),Object(me.jsxs)(W.a,{button:!0,onClick:function(){t.push("/employee/leave-calendar")},children:[Object(me.jsx)(f.a,{children:Object(me.jsx)(U.a,{})}),Object(me.jsx)(v.a,{primary:"View Leave Calendar"})]})]}),Object(me.jsx)(L.a,{})]}),Object(me.jsx)("main",{className:i.content,children:Object(me.jsx)("div",{className:i.appBarSpacer,children:Object(me.jsxs)(A.a,{maxWidth:"lg",className:i.container,children:[Object(me.jsx)(p.b,{path:"/employee/",exact:!0,children:Object(me.jsxs)(N.a,{container:!0,spacing:3,justifyContent:"space-around",children:[Object(me.jsxs)(N.a,{item:!0,xs:12,md:4,lg:3,children:[Object(me.jsx)(E.a,{style:{textAlign:"center"},onClick:function(){te(!0)},children:Object(me.jsxs)(D.a,{children:[Object(me.jsx)(w.a,{style:{fontSize:16},color:"textSecondary",children:"Total Available Leaves"}),Object(me.jsx)(w.a,{color:"textSecondary",variant:"caption",children:"in total"}),Object(me.jsx)(w.a,{variant:"h5",component:"div",color:r.leave_balance<4?"error":"initial",children:r.leave_balance})]})}),Object(me.jsx)(X.a,{open:ee,onClose:function(){te(!1)},children:Object(me.jsxs)($.a,{sx:{width:400,paddingBottom:3,paddingLeft:1,paddingRight:1},children:[Object(me.jsx)(Q.a,{children:"Total Available Leaves"}),Object(me.jsx)(Te.a,{children:nt.map((function(e){return Object(me.jsxs)("div",{children:[Object(me.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(me.jsx)(w.a,{variant:"subtitle1",children:e.leave_type_name}),Object(me.jsx)(w.a,{variant:"subtitle1",children:e.limit})]}),Object(me.jsx)(L.a,{})]})}))})]})})]}),Object(me.jsxs)(N.a,{item:!0,xs:12,md:4,lg:3,children:[Object(me.jsx)(E.a,{style:{textAlign:"center"},onClick:function(){re(!0)},children:Object(me.jsxs)(D.a,{children:[Object(me.jsx)(w.a,{style:{fontSize:16},color:"textSecondary",children:"Total Leaves Applied"}),Object(me.jsx)(w.a,{color:"textSecondary",variant:"caption",children:"this month"}),Object(me.jsx)(w.a,{variant:"h5",component:"div",children:r.leaves_month})]})}),Object(me.jsx)(X.a,{open:ce,onClose:function(){re(!1)},children:Object(me.jsxs)($.a,{sx:{width:400,paddingBottom:2,paddingLeft:1,paddingRight:1},children:[Object(me.jsx)(Q.a,{children:"Total Leaves Applied (month)"}),Object(me.jsx)(Te.a,{children:nt.map((function(e){return Object(me.jsxs)("div",{children:[Object(me.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(me.jsx)(w.a,{variant:"subtitle1",children:e.leave_type_name}),Object(me.jsx)(w.a,{variant:"subtitle1",children:e.limit})]}),Object(me.jsx)(L.a,{})]})}))})]})})]}),Object(me.jsxs)(N.a,{item:!0,xs:12,md:4,lg:4,children:[Object(me.jsx)(E.a,{style:{textAlign:"center"},onClick:function(){le(!0)},children:Object(me.jsxs)(D.a,{children:[Object(me.jsx)(w.a,{style:{fontSize:16},color:"textSecondary",children:"Total Leaves Applied"}),Object(me.jsx)(w.a,{color:"textSecondary",variant:"caption",children:"in total"}),Object(me.jsx)(w.a,{variant:"h5",component:"div",children:r.leaves_total})]})}),Object(me.jsx)(X.a,{open:oe,onClose:function(){le(!1)},children:Object(me.jsxs)($.a,{sx:{width:400,paddingBottom:2,paddingLeft:1,paddingRight:1},children:[Object(me.jsx)(Q.a,{children:"Total Leaves Applied (year)"}),Object(me.jsx)(Te.a,{children:nt.map((function(e){return Object(me.jsxs)("div",{children:[Object(me.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(me.jsx)(w.a,{variant:"subtitle1",children:e.leave_type_name}),Object(me.jsx)(w.a,{variant:"subtitle1",children:e.limit})]}),Object(me.jsx)(L.a,{})]})}))})]})})]}),Object(me.jsx)(N.a,{item:!0,xs:12,md:4,lg:12,children:Object(me.jsx)(aa,{leaves:Et,fetchLeaves:It,webSocket:ta})})]})}),Object(me.jsx)(p.b,{path:"/employee/profile",exact:!0,children:Object(me.jsx)(Ce,{})}),Object(me.jsx)(p.b,{path:"/employee/settings",exact:!0,children:Object(me.jsx)(Ne,{role:"employee"})}),Object(me.jsx)(p.b,{path:"/employee/change-password",exact:!0,children:Object(me.jsx)(ut,{})}),Object(me.jsx)(p.b,{path:"/employee/leave-calendar",exact:!0,children:Object(me.jsx)(yt,{leaves:Et})})]})})})]})},ra=a(427),ia=a(430),sa=a(428),oa=a(431),la=a(451),ja=a(436),da=a(227),ba=a.n(da);function ha(){return Object(me.jsxs)(w.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(me.jsx)(ra.a,{color:"inherit",href:"https://material-ui.com/",children:"IIT Goa ELMS"})," ","."]})}var Oa,xa=Object(O.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var pa=function(e){jt("Login");var t=function(){return Object(me.jsx)("input",{type:"hidden",name:"csrfmiddlewaretoken",value:a})},a=ba.a.get("csrftoken"),c=xa(),r=Object(p.f)(),i=st(),s=it(),j=s.loading,b=s.errorMessage,h=Object(n.useState)(""),O=Object(d.a)(h,2),x=O[0],u=O[1],m=Object(n.useState)(""),g=Object(d.a)(m,2),f=g[0],v=g[1],_=Object(n.useState)(!1),S=Object(d.a)(_,2),C=S[0],k=S[1],L=Object(n.useState)(""),T=Object(d.a)(L,2),W=T[0],N=T[1];Object(n.useEffect)((function(){(Oa=new WebSocket("ws://127.0.0.1:8000/ws/update-user")).onclose=function(e){console.error("Chat socket closed unexpectedly")}}),[]);var E=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={username:x,password:f,role:W},e.prev=2,e.next=5,Ke(i,a);case 5:if((n=e.sent).user){e.next=9;break}return k(!0),e.abrupt("return");case 9:n.user.is_employee?(Oa.send(JSON.stringify({action:"UPDATE",employee:!1,admin:!0,manager:!0})),r.push("/employee")):n.user.is_admin?r.push("/admin"):r.push("/manager"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0+" here");case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){k(!1)},I=function(e){"username"===e.target.id?u(e.target.value):v(e.target.value)};return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(A.a,{component:"main",maxWidth:"xs",children:[Object(me.jsx)(y.a,{}),Object(me.jsxs)("div",{className:c.paper,children:[Object(me.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/en/thumb/a/a7/Indian_Institute_of_Technology_Goa_Logo.svg/1200px-Indian_Institute_of_Technology_Goa_Logo.svg.png",alt:"",height:150,width:150}),Object(me.jsx)(w.a,{component:"h1",variant:"h5",children:"ELMS Sign In"}),Object(me.jsxs)("form",{className:c.form,noValidate:!0,method:"POST",action:"/login",children:[Object(me.jsx)(t,{}),Object(me.jsx)(ia.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:x,onChange:I}),Object(me.jsx)(ia.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:f,onChange:I}),Object(me.jsxs)(Ee.a,{fullWidth:!0,required:!0,children:[Object(me.jsx)(De.a,{id:"role-label",children:"Role"}),Object(me.jsxs)(Ie.a,{labelId:"role-label",id:"role",value:W,label:"Role",onChange:function(e){N(e.target.value)},margin:"normal",required:!0,children:[Object(me.jsx)(Re.a,{value:0,children:"Employee"}),Object(me.jsx)(Re.a,{value:1,children:"Admin"}),Object(me.jsx)(Re.a,{value:2,children:"Manager"})]})]}),Object(me.jsx)(sa.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:c.submit,onClick:E,disabled:j,children:"Sign In"})]})]}),Object(me.jsx)(oa.a,{mt:8,children:Object(me.jsx)(ha,{})}),Object(me.jsx)(la.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:C,onClose:D,autoHideDuration:2e3,children:Object(me.jsx)(ja.a,{variant:"filled",severity:"error",onClose:D,children:b})},"topcenter")]}),")"]})};var ua=function(){var e=it().user,t=st(),a=[];return Object(n.useEffect)((function(){window.addEventListener("storage",(function(e){e.user||t({type:"LOGOUT"})}))}),[]),Object(me.jsx)("div",{className:"App",children:Object(me.jsxs)(Ct.a,{children:[Object(me.jsx)(p.b,{path:"/login",exact:!0,children:e?e.is_employee?Object(me.jsx)(p.a,{to:"/employee"}):e.is_manager?Object(me.jsx)(p.a,{to:"/manager"}):Object(me.jsx)(p.a,{to:"/admin"}):Object(me.jsx)(pa,{})}),Object(me.jsx)(kt,{path:"/",exact:!0,children:e?e.is_employee?Object(me.jsx)(p.a,{to:"/employee"}):e.is_manager?Object(me.jsx)(p.a,{to:"/manager"}):Object(me.jsx)(p.a,{to:"/admin"}):Object(me.jsx)(p.a,{to:"/login"})}),Object(me.jsx)(kt,{path:"/manager",children:e&&e.is_manager?Object(me.jsx)(wt,{}):Object(me.jsx)(p.a,{to:"/login"})}),Object(me.jsx)(kt,{path:"/admin",children:e&&e.is_admin?Object(me.jsx)(Zt,{}):Object(me.jsx)(p.a,{to:"/login"})}),Object(me.jsx)(kt,{path:"/employee",children:e&&e.is_employee?Object(me.jsx)(ca,{leaveTypes:a}):Object(me.jsx)(p.a,{to:"/login"})})]})})},ma=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,476)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),r(e),i(e)}))};i.a.render(Object(me.jsx)(c.a.StrictMode,{children:Object(me.jsx)(ot,{children:Object(me.jsx)(ua,{})})}),document.getElementById("root")),ma()}},[[292,1,2]]]);
//# sourceMappingURL=main.7ed78071.chunk.js.map